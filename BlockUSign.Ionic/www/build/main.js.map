{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/annotate/annotate.module.ts","../../src/pages/annotate/annotate.ts","../../src/models/models.ts","../../src/components/block-pdf/block-pdf.ts","../../src/directives/directives.module.ts","../../src/services/document.service.ts","../../src/pages/email/email.module.ts","../../src/services/email.service.ts","../../src/pages/review/review.module.ts","../../src/pages/home/home.module.ts","../../src/pages/home/home.ts","../../src/services/global.service.ts","../../src/pages/sign/sign.module.ts","../../src/app/options.popover.page.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/models/state.ts","../../src/components/block-steps/block-steps.ts","../../util (ignored)","../../fs (ignored)","../../http (ignored)","../../https (ignored)","../../src/components/components.module.ts","../../src/directives/absolute-drag/absolute-drag.ts","../../src/components/block-chat/block-chat.ts","../../node_modules/moment/locale ^/.//.*$","../../src/pages/email/email.ts","../../src/services/blockstack.service.ts","../../src/pages/review/review.ts","../../src/pages/sign/sign.ts","../../src/app/app.component.ts","../../src/services/coin.service.ts","../../src/services/cryptocompare.service.ts","../../src/services/slack.service.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kC;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;;AC7BgD;AACN;AACuB;AACjE,uFAAuF;AACR;AAiB7E;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAfhC,+DAAQ,CAAC;YACN,YAAY,EAAE;gBACV,+DAAY;aAGf;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;gBACtC,gGAAyB;aAC1B;YACD,eAAe,EAAE;gBACb,+DAAY;aACf;YACD,OAAO,EAAE,CAAE,qEAAsB,CAAE;SACpC,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBoB;AACqB;AACR;AACjC;AACE;AACF;AACF;AAM/B,mDAAmD;AAOnD;IAEE,sBACS,OAAsB,EACtB,SAAoB,EACpB,eAAgC,EAChC,MAAc;QAHd,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;IAGvB,CAAC;IATU,YAAY;QALxB,gEAAS,CAAC;YACT,QAAQ,EAAE,eAAe;YACzB,WAAW,EAAE,YAAe;WACH;SAC1B,CAAC;6EAI+B;YACX,mFAAS;YACH,+DAAe;YACxB,MAAM;OANZ,YAAY,CAYxB;IAAD,CAAC;AAAA;SAZY,YAAY,e;;;;;;;;;;;;;ACnBzB;AAAA;IAkBI;QACI,IAAI,CAAC,IAAI,GAAS,MAAO,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,KAAK;IAC5B,CAAC;IACL,eAAC;AAAD,CAAC;;AAED;IAMI;QACI,IAAI,CAAC,IAAI,GAAS,MAAO,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;IACvC,CAAC;IAEL,UAAC;AAAD,CAAC;;AAED;IASI;QACI,IAAI,CAAC,IAAI,GAAS,MAAO,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAS,IAAK,CAAC,GAAG,EAAE,CAAC;IACvC,CAAC;IAEL,cAAC;AAAD,CAAC;;AAED,8CAA8C;AAC9C;IAEI;IAEA,CAAC;IACL,iBAAC;AAAD,CAAC;;AAED,4GAA4G;AAC5G;IACI;QACI,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC;IACpB,CAAC;IACL,sBAAC;AAAD,CAAC;;AAED;IAAA;IAMA,CAAC;IAAD,yBAAC;AAAD,CAAC;;AAED,sCAAsC;AACtC,qCAAqC;AACrC,IAAI;AACJ,QAAQ;AACR,0BAA0B;AAC1B,wDAAwD;AACxD,4BAA4B;AAC5B,4BAA4B;AAC5B,wCAAwC;AACxC,qCAAqC;AACrC,kCAAkC;AAClC,qBAAqB;AACrB,8BAA8B;AAC9B,SAAS;AACT,QAAQ;AACR,0BAA0B;AAC1B,wDAAwD;AACxD,4BAA4B;AAC5B,4BAA4B;AAC5B,wCAAwC;AACxC,qCAAqC;AACrC,kCAAkC;AAClC,qBAAqB;AACrB,+BAA+B;AAC/B,QAAQ;AACR,IAAI;AAEJ,eAAe;AACf,yBAAyB;AAEzB,wCAAwC;AACxC,0BAA0B;AAC1B,IAAI;AACJ,4CAA4C;AAC5C,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHsH;AACrC;AAInB;AACjC;AACE;AACF;AACF;AAEa;AACL;AAsBvC;;;;;GAKG;AAMH;IA+BE,2BACS,OAAsB,EACtB,SAAoB,EACpB,eAAgC,EAC/B,cAAiC,EACjC,gBAAkC,EACnC,WAA8B;QAL9B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,oBAAe,GAAf,eAAe,CAAiB;QAC/B,mBAAc,GAAd,cAAc,CAAmB;QACjC,qBAAgB,GAAhB,gBAAgB,CAAkB;QACnC,gBAAW,GAAX,WAAW,CAAmB;QAhC9B,gBAAW,GAAG,CAAC,CAAC;QAIhB,cAAS,GAAG,OAAO,CAAC;QAGtB,gBAAW,GAAG,qBAAqB,CAAC,CAAC,0CAA0C;QAG/E,OAAE,GAAG,oDAAW,CAAC;QAIjB,gBAAW,GAAW,gBAAgB,CAAC;QACvC,aAAQ,GAAW,SAAS,CAAC;QAGpC,oBAAe,GAAG,IAAI,CAAC;QACvB,gBAAW,GAAG,IAAI,CAAC;QACnB,aAAQ,GAAG,CAAC,CAAC;QACb,aAAQ,GAAG,CAAC,CAAC;QAEb,gBAAW,GAAG,KAAK,CAAC;QAWlB,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IAEnC,CAAC;IAGD,oCAAQ,GAAR;QAAA,iBAYC;QAXC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC9B,CAAC,CAAE,QAAQ,CAAE,CAAC,KAAK,CAAE;YAEnB,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACrC,OAAO,EAAE,gBAAgB;aAC1B,CAAC,CAAC;YACH,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,KAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,uCAAW,GAAX;QACE,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IAEnC,CAAC;IAED,gCAAI,GAAJ;QACE,uBAAuB;QACvB,+GAA+G;QAFjH,iBAkCC;QA9BC,IAAI,CAAC,SAAS,GAAI,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE;YAC5D,QAAQ,EAAE,YAAY;SACvB,CAAC,CAAC;QAEH,IAAI,OAAO,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC;QACvC,EAAE,CAAC,CAAC,OAAO,CAAC,EAAC;YACX,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,MAAM,CAAC;QACT,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC;YACnE,IAAI,MAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtC,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gBACrD,KAAI,CAAC,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1C,KAAI,CAAC,eAAe,CAAC,aAAa,CAAC,MAAI,CAAC,CAAC;gBACzC,KAAI,CAAC,OAAO,EAAE,CAAC;gBACf,4CAA4C;YAC9C,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACzE,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtC,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YACzC,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;IACzD,CAAC;IAGK,mCAAO,GAAb;;;;;4BAEa,qBAAM,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,GAAG,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,WAAW,CAAC;;wBAAzI,IAAI,GAAG,SAAkI;wBAC7I,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;wBAElB,OAAO,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBAE7C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,mDAAmD;;;;;KA2B3E;IAED,gCAAI,GAAJ;QACE,8BAA8B;QAC9B,gCAAgC;QAChC,iCAAiC;QACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAChC,CAAC;IAED,gCAAI,GAAJ;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC7B,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI;SAC3C,CAAC,CAAC;IACL,CAAC;IAED,iCAAK,GAAL;QACE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;QAC/B,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;QAC/B,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAED,mCAAO,GAAP,UAAQ,OAAO;QAAf,iBA6EC;QA3EC,IAAI,WAAW,GAAG,4DAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAE1D,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,GAAG;YAE3B,IAAI,UAAU,GAAG,CAAC,CAAC;YACnB,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gBAChC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBAE3B,IAAI,KAAK,GAAG,CAAC,CAAC;gBACd,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAEvC,2CAA2C;gBAC3C,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBAChD,IAAI,OAAO,GAAS,MAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBACvC,MAAO,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;gBACjC,MAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;gBAIrC,sCAAsC;gBACtC,IAAI,aAAa,GAAG;oBAClB,aAAa,EAAE,OAAO;oBACtB,QAAQ,EAAE,QAAQ;iBACnB,CAAC;gBACF,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;qBACxC,IAAI,CAAC;oBAEJ,qBAAqB;oBACrB,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;gBAC/B,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,WAAW;oBAClB,4CAA4C;oBAC5C,IAAI,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBAEjD,6DAA6D;oBAC7D,YAAY,CAAC,YAAY,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;oBAEhD,4DAA4D;oBAC5D,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAG,KAAI,CAAC,WAAa,CAAC,CAAC;oBACzD,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;oBAI9B,gDAAgD;oBAChD,IAAI,SAAS,GAAG,IAAI,gBAAgB,CAAC;wBACnC,YAAY,EAAE,YAAY;wBAC1B,SAAS,EAAE,IAAI,CAAC,SAAS;wBACzB,QAAQ,EAAE,QAAQ;qBACnB,CAAC,CAAC;oBAEH,qBAAqB;oBACrB,SAAS,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;oBAKtC,wBAAwB;oBACxB,SAAS,CAAC,MAAM,EAAE,CAAC;oBAInB,WAAW;oBACX,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBAEnB,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBAEzB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QAEL,CAAC,EAAE,UAAC,MAAM;YAER,oBAAoB;YACpB,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,kBAAkB;IAElB,wDAAwD;IACxD,0CAA0C;IAC1C,8BAA8B;IAC9B,oEAAoE;IACpE,wDAAwD;IACxD,2CAA2C;IAC3C,QAAQ;IACR,yBAAyB;IACzB,MAAM;IACN,8CAA8C;IAE9C,IAAI;IAEJ,kEAAkE;IAElE,2CAA2C;IAC3C,oEAAoE;IACpE,kCAAkC;IAClC,uBAAuB;IACvB,UAAU;IACV,yDAAyD;IACzD,uCAAuC;IACvC,0DAA0D;IAC1D,oDAAoD;IACpD,oBAAoB;IACpB,UAAU;IACV,kEAAkE;IAClE,qCAAqC;IACrC,8BAA8B;IAC9B,8BAA8B;IAC9B,0CAA0C;IAC1C,mBAAmB;IACnB,uCAAuC;IACvC,mBAAmB;IACnB,sCAAsC;IACtC,YAAY;IACZ,mEAAmE;IACnE,iEAAiE;IACjE,6CAA6C;IAE7C,4CAA4C;IAC5C,kEAAkE;IAClE,iEAAiE;IACjE,qEAAqE;IACrE,6EAA6E;IAE7E,oDAAoD;IACpD,mFAAmF;IACnF,wEAAwE;IACxE,oBAAoB;IACpB,UAAU;IACV,6CAA6C;IAC7C,qDAAqD;IACrD,QAAQ;IAER,QAAQ;IAER,oBAAoB;IAEpB,IAAI;IAEJ,uCAAuC;IAEvC,mEAAmE;IACnE,kBAAkB;IAClB,yCAAyC;IACzC,MAAM;IACN,kBAAkB;IAClB,sCAAsC;IACtC,MAAM;IACN,kCAAkC;IAClC,kEAAkE;IAClE,MAAM;IACN,0BAA0B;IAC1B,iCAAiC;IAEjC,IAAI;IAGJ,0BAA0B;IAE1B,0CAA0C;IAC1C,mFAAmF;IACnF,MAAM;IAEN,IAAI;IAEJ,4CAAgB,GAAhB,UAAiB,CAAC;QAEhB,EAAE,CAAC,CAAC,OAAO,CAAC,gDAAgD,CAAC,CAAC,CAAC,CAAC;YAC9D,6DAA6D;YAC7D,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;QAC5B,CAAC;IAEH,CAAC;IAED,mBAAmB;IACnB,oFAAoF;IACpF,yBAAyB;IACzB,2HAA2H;IAC3H,MAAM;IAEN,IAAI;IAEJ,2CAAe,GAAf,UAAgB,CAAC;QACf,yBAAyB;QACzB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,wCAAwC;IACnE,CAAC;IAAA,CAAC;IAEF,8BAA8B;IAC9B,mCAAO,GAAP,UAAQ,IAAS;QAEf,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACjI,CAAC,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACvC,CAAC,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACxC,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACxC,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACzC,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IACjD,CAAC;IAEK,mCAAO,GAAb;;;;;;wBAGM,GAAG,GAAG,EAAE,CAAC;wBACb,CAAC,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC;4BACzB,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;4BACjB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;gCACrB,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;4BACxB,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,WAAW;wBACX,mCAAmC;wBACnC,qBAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,EAAE,GAAG,CAAC;;wBAFrF,WAAW;wBACX,mCAAmC;wBACnC,SAAqF,CAAC;wBAEtF,qBAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,EAAE,oBAAoB,CAAC;;wBAAjG,SAAiG,CAAC;;;;;KAGnG;IAEK,mCAAO,GAAb,UAAc,IAAS;;;;;;wBACrB,8CAA8C;wBAE9C,UAAU;wBACV,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;wBAER,qBAAM,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC;;wBAAtF,IAAI,GAAG,SAA+E;wBACtF,SAAS,GAAG,IAAI,CAAC;wBACrB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACT,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;wBAC/B,CAAC;wBAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACd,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;wBACpC,CAAC;;;;;KAMF;IAxYQ;QAAR,4DAAK,EAAE;;0DAAiB;IAChB;QAAR,4DAAK,EAAE;;4DAAkB;IACjB;QAAR,4DAAK,EAAE;;2DAAiB;IAChB;QAAR,4DAAK,EAAE;;0DAAgB;IACf;QAAR,4DAAK,EAAE;;wDAAqB;IATlB,iBAAiB;QAL7B,gEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACQ;SAE9B,CAAC;6EAiC+B;YACX,mFAAS;YACH,gEAAe;YACf,gEAAiB;YACf,wEAAgB;YACtB,cAAiB;OArC5B,iBAAiB,CA+Y7B;IAAD,CAAC;AAAA;SA/YY,iBAAiB,W;;;;;;;;;;;;;;;;;AC7CW;AAC6B;AAMtE;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAL5B,+DAAQ,CAAC;YACT,YAAY,EAAE,CAAC,2FAAqB,CAAC;YACrC,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC,2FAAqB,CAAC;SAChC,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPc;AACiB;AACvB;AACU;AAEhB;AACE;AAEM;AAEkB;AACA;AAOf;AACF;AAExC;;;;;EAKE;AAEF;IAUE,+BAA+B;IAE/B,yBACS,MAAc,EACb,IAAU,EACV,iBAAoC;QAH9C,iBAaC;QAZQ,WAAM,GAAN,MAAM,CAAQ;QACb,SAAI,GAAJ,IAAI,CAAM;QACV,sBAAiB,GAAjB,iBAAiB,CAAmB;QAbtC,kBAAa,GAAG,iCAAiC,CAAC;QAse1D,UAAK,GAAG,IAAI,4DAAK,EAAE,CAAC;QAvdlB,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;QACrD,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QAExB,yEAAyE;QACzE,0EAA0E;QAC1E,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YACrC,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,2CAAiB,GAAvB,UAAwB,OAAgB;;;;;;6BAClC,OAAO,EAAP,wBAAO;wBACE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAAtE,IAAI,GAAG,SAA+D;wBAC1E,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACT,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;wBACxC,CAAC;6BACG,KAAI,CAAC,aAAa,IAAI,IAAI,IAAI,CAAC,IAAI,GAAnC,wBAAmC;wBACrC,SAAI;wBAAiB,eAAI,EAAC,KAAK;wBAAC,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAArG,GAAK,aAAa,GAAG,cAAW,SAAqE,EAAC,CAAC;;4BAG3G,sBAAO,IAAI,CAAC,aAAa,EAAC;;;;KAC3B;IAGK,qCAAW,GAAjB,UAAkB,QAAgB,EAAE,UAAe;;;;;;wBAC7C,WAAW,GAAG,IAAI,gEAAQ,EAAE,CAAC;wBACjC,WAAW,CAAC,QAAQ,GAAG,QAAQ,CAAC;wBAChC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBAC7C,WAAW,CAAC,gBAAgB,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;wBAC5E,qBAAM,IAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE;;wBAA3D,WAAW,GAAG,SAA6C;wBAC3D,OAAO,GAAG,IAAI,CAAC;wBACnB,EAAE,CAAC,CAAC,WAAW,CAAC,EAAC;4BACf,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;wBAC1C,CAAC;wBACD,gBAAW;;4BACT,IAAI,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI;4BAC5C,MAAM,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ;4BAC1C,KAAK,EAAE,OAAO;;wBACA,qBAAM,IAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE;;wBAJ9D,GAAY,KAAK,KAIf,eAAY,GAAE,SAA8C;gCAC5D,gBAAa,GAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;oCAC7E,CAAC;wBACH,WAAW,CAAC,MAAM,GAAG,EAAE,CAAC;wBACxB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACrC,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAAnG,SAAmG,CAAC;wBACpG,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;wBAC5B,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC;wBACf,qBAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE,WAAW,CAAC,WAAW,CAAC;;wBAA7F,QAAQ,GAAG,SAAkF;wBACjG,sBAAO,IAAI,CAAC,aAAa,EAAC;;;;KAC3B;IAEK,wCAAc,GAApB,UAAqB,YAAY,EAAE,GAAG;;;;;;wBAEhC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,YAAY,EAAvB,CAAuB,CAAC,CAAC;6BAEnE,MAAK,KAAK,CAAC,CAAC,GAAZ,wBAAY;wBACd,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;wBAChC,uBAAuB;wBACvB,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBADnG,uBAAuB;wBACvB,SAAmG,CAAC;wBACpG,sBAAO,IAAI,EAAC;4BAEd,sBAAO,KAAK,EAAC;;;;KACd;IAIK,wCAAc,GAApB,UAAqB,QAAQ;;;;;wBAC3B,cAAc;wBACd,IAAI,CAAC,aAAa,GAAS,IAAI,CAAC,aAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;wBAChE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAAnG,SAAmG,CAAC;wBACpG,qBAAM,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC;;wBAA7C,SAA6C,CAAC;wBAC9C,qBAAqB;wBACrB,sBAAO,IAAI,CAAC,aAAa,EAAC;;;;KAC3B;IAEK,0CAAgB,GAAtB,UAAuB,IAAY,EAAE,GAAQ,EAAE,WAAmB;;;;;;wBAC5D,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;wBACpD,6BAA6B;wBAC7B,qBAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;;wBADlC,6BAA6B;wBAC7B,SAAkC,CAAC;wBACnC,qBAAqB;wBACrB,qBAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;;wBADvB,qBAAqB;wBACrB,SAAuB,CAAC;wBACxB,sBAAO,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,MAAM,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,IAAO,CAAC,CAAC,EAAC;;;;KAChG;IAEK,qCAAW,GAAjB,UAAkB,QAAgB,EAAE,WAAmB;;;;;4BAC1C,qBAAM,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAA7D,IAAI,GAAG,SAAsD;wBACjE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACL,YAAY,GAAG,IAAI,CAAC;4BACxB,MAAM,gBAAC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,WAAW,CAAC,EAAC;wBACpD,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,MAAM,gBAAC,IAAI,EAAC;wBACd,CAAC;;;;;KACF;IAEK,2CAAiB,GAAvB,UAAwB,OAAe,EAAE,MAAc;;;;;4BAC1C,qBAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE;;wBAA/C,IAAI,GAAG,SAAwC;wBACnD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACL,YAAY,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;4BAC/B,MAAM,gBAAC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,MAAM,CAAC,EAAC;wBAC/C,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,MAAM,gBAAC,+DAAE,CAAC,IAAI,CAAC,EAAC;wBAClB,CAAC;;;;;KACF;IAEK,sCAAY,GAAlB,UAAmB,WAAqB,EAAE,IAAY,EAAE,UAAe;;;;;;;wBACrE,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;wBACvC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;wBAC1B,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;wBAE5B,MAAM,GAAG,IAAI,CAAC;wBAClB,EAAE,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC;4BAC1C,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;wBAClD,CAAC;wBACG,QAAQ,GAAG,IAAI,CAAC;wBACpB,EAAE,EAAC,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,EAAC;4BACrC,QAAQ,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC;wBAChD,CAAC;wBACiB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE;;wBAA3D,WAAW,GAAG,SAA6C;wBAC3D,OAAO,GAAG,IAAI,CAAC;wBACnB,EAAE,CAAC,CAAC,WAAW,CAAC,EAAC;4BACf,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;wBAC1C,CAAC;wBAED,sBAAW,CAAC,KAAK,EAAC,IAAI;;4BACpB,IAAI,EAAE,MAAM;4BACZ,MAAM,EAAE,QAAQ;4BAChB,KAAK,EAAE,OAAO;;wBACA,qBAAM,IAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE;;wBAJ9D,eAIE,eAAY,GAAE,SAA8C;gCAC5D,gBAAa,GAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;qCAC7E,CAAC;wBAEH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACrC,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAE,CAAC;wBACjD,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAAnG,SAAmG,CAAC;wBACpG,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC;wBAC9B,wFAAwF;wBACxF,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;wBACxB,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACnE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,MAAM,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,IAAO,CAAC,CAAC;;wBAAjG,CAAC,GAAG,SAA6F;wBAGpF,qBAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,GAAG,IAAI,GAAG,mBAAmB,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;;wBAAxI,UAAU,GAAG,SAA2H;wBAC5I,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;4BACf,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC;wBACrE,CAAC;wBACD,IAAI,EAAC;4BACH,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;wBACjC,CAAC;wBAIG,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAE,UAAC,EAAE,IAAK,SAAE,CAAC,KAAK,IAAI,KAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,EAAhD,CAAgD,CAAG,CAAC,MAAM,EAAE,CAAC;wBACtH,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,IAAI,GAAG,WAAW,CAAC;wBAC7C,qBAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;;wBAA5E,WAAW,GAAG,SAA8D;6BAC5E,WAAW,EAAX,wBAAW;wBACT,MAAM,GAAG,iEAAc,CAAC,WAAW,CAAC,CAAC;wBACzC,qBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;;wBAAhC,SAAgC,CAAC;;4BAMnC,sBAAO,IAAI,CAAC,aAAa,EAAC;;;;KAC3B;IAED,wCAAc,GAAd,UAAe,IAAI;QACjB,IAAI,MAAM,GAAG,KAAK,CAAC;QACnB,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAG,UAAC,EAAE,IAAK,SAAE,CAAC,IAAI,IAAI,IAAI,EAAf,CAAe,CAAE,CAAC,MAAM,EAAE,CAAC;QACjF,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;YACnB,MAAM,GAAG,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAEK,+CAAqB,GAA3B,UAA4B,QAAQ;;;;;;KAInC;IAEK,6CAAmB,GAAzB,UAA0B,IAAY;;;;4BACpC,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,mBAAmB,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAA5E,SAA4E,CAAC;wBAC7E,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,WAAW,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAApE,SAAoE,CAAC;wBACrE,sBAAO,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,IAAO,CAAC,CAAC,EAAC;;;;KACtF;IAGK,2CAAiB,GAAvB,UAAwB,IAAY;;;;;;wBAC9B,IAAI,GAAG;4BACT,WAAW,EAAE,EAAE;yBAChB;wBACD,IAAI,CAAC,wBAAwB,GAAG,iEAAc,EAAE,CAAC;wBAC7C,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,0BAA0B,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;wBAClG,IAAI,CAAC,wBAAwB,GAAG,mEAAgB,CAAC,IAAI,CAAC,wBAAwB,EAAE,MAAM,EAAE,aAAG;4BACzF,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC;wBAClB,CAAC,CAAC,CAAC;wBACC,YAAY,GAAG,iEAAc,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;wBAC7D,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACvE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,mBAAmB,EAAE,SAAS,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;4BAA1F,sBAAO,SAAmF,EAAC;;;;KAC5F;IAEK,yCAAe,GAArB,UAAsB,IAAY,EAAE,UAAkB;;;;;;wBAChD,IAAI,GAAG;4BACT,WAAW,EAAE,UAAU;yBACxB;wBACG,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,uBAAuB,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;wBAC/F,IAAI,CAAC,wBAAwB,GAAG,mEAAgB,CAAC,IAAI,CAAC,wBAAwB,EAAE,MAAM,EAAE,aAAG;4BACzF,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;wBAC/B,CAAC,CAAC,CAAC;wBACC,YAAY,GAAG,iEAAc,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;wBAC7D,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACvE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,mBAAmB,EAAE,SAAS,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;4BAA1F,sBAAO,SAAmF,EAAC;;;;KAC5F;IAEK,wCAAc,GAApB,UAAqB,IAAY;;;;;4BACpB,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,mBAAmB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAA/E,IAAI,GAAG,SAAwE;wBACnF,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACL,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;4BACtE,IAAI,CAAC,wBAAwB,GAAG,iEAAc,CAAC,SAAS,CAAC,CAAC;4BAC1D,IAAI,CAAC,qBAAqB,GAAI,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,yBAAwB;wBAChG,CAAC;wBACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACV,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;wBAClC,CAAC;wBAID,sBAAO,IAAI,CAAC,qBAAqB,EAAC;;;;KACnC;IAEK,8CAAoB,GAA1B,UAA2B,OAAe,EAAE,MAAc;;;;;4BAE7C,qBAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE;;wBAA/C,IAAI,GAAG,SAAwC;wBACnD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACL,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;4BAC9C,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;4BAC9D,IAAI,CAAC,wBAAwB,GAAG,iEAAc,CAAC,WAAW,CAAC,CAAC;4BAC5D,IAAI,CAAC,qBAAqB,GAAI,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;4BACtE,uDAAuD;wBACzD,CAAC;wBACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACV,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;wBAClC,CAAC;wBACD,sBAAO,IAAI,CAAC,qBAAqB,EAAC;;;;KACnC;IAEK,0CAAgB,GAAtB,UAAuB,IAAI,EAAE,MAAO,EAAE,IAAK;;;;;;6BACrC,CAAC,MAAM,EAAP,wBAAO;wBACA,qBAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,GAAG,IAAI,GAAG,mBAAmB,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;;wBAApI,MAAM,GAAG,SAA2H,CAAC;wBACrI,MAAM,GAAG,IAAI,CAAC,wBAAwB,CAAC;;;6BAErC,CAAC,IAAI,EAAL,wBAAK;wBACC,qBAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;;wBAAvC,IAAI,GAAI,SAA+B,CAAC;wBACxC,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC;;;wBAInC,iBAAiB,GAAG,kEAAe,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;wBAEtD,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;;;;;KAEhD;IAED,uCAAa,GAAb,UAAc,IAAY;QACxB,wBAAwB;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,IAAI,EAAd,CAAc,CAAC,CAAC;QAC/D,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,+BAA+B,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACtE,IAAI,IAAI,GAAG,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC/D,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;YAChB,CAAC,CAAC,wBAAwB,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAClD,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;YAChB,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,oBAAoB;IACd,gCAAM,GAAZ,UAAa,IAAY;;;;;;;wBACnB,WAAW,GAAG,IAAI,GAAG,WAAW,CAAC;;;;wBAG5B,qBAAM,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAAhE,IAAI,GAAG,SAAyD,CAAC;6BAE7D,IAAI,EAAJ,wBAAI;wBACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACpE,IAAI,CAAC,MAAM,GAAI,iEAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;6BAEvC,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAhC,wBAAgC;wBAClC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;wBAEvB,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAE,UAAC,EAAE,IAAK,SAAE,CAAC,KAAK,IAAI,KAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,EAAhD,CAAgD,CAAG,CAAC,MAAM,EAAE,CAAC;wBAGtH,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,aAAa;6BACrC,QAAQ,EAAR,wBAAQ;wBACN,GAAG,GAAG,QAAQ,GAAG,WAAW,CAAC;wBACjB,qBAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE;;wBAAhD,SAAS,GAAG,SAAoC;wBACpD,gCAAgC;wBAChC,EAAE,CAAC,CAAC,SAAS,CAAC,EAAC;4BACT,GAAG,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;4BAC3B,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;4BACvD,QAAQ,GAAG,iEAAc,CAAC,GAAG,CAAC,CAAC;4BAC/B,QAAQ,GAAG,kEAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;4BACrD,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;wBACzB,CAAC;;;wBAGL,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;;;wBAIzB,WAAS,IAAI,2DAAG,EAAE,CAAC;wBACvB,QAAM,CAAC,QAAQ,GAAG,EAAE,CAAC;wBACjB,GAAG,GAAG,IAAI,+DAAO,EAAE,CAAC;wBACxB,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC;wBACnD,GAAG,CAAC,aAAa,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;wBAC3D,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC;wBACjD,GAAG,CAAC,OAAO,GAAG,aAAa,CAAC;wBAC5B,QAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBAC1B,IAAI,CAAC,MAAM,GAAG,iEAAc,EAAE,CAAC;wBAC/B,IAAI,CAAC,MAAM,GAAG,mEAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,mBAAmB,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,aAAG;4BACnF,GAAG,CAAC,GAAG,GAAG,QAAM,CAAC;wBACnB,CAAC,CAAC,CAAC;wBACC,MAAM,GAAG,iEAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBACzC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;wBACvD,qBAAM,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAA1E,MAAM,GAAG,SAAiE,CAAC;wBAC3E,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACjE,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;wBAC9B,IAAI,CAAC,MAAM,GAAG,iEAAc,CAAC,MAAM,CAAC,CAAC;wBACrC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;;4BAG7B,sBAAO,IAAI,CAAC,GAAG,EAAC;;;;;;;;KAKnB;IAEK,iCAAO,GAAb,UAAc,IAAY,EAAE,MAAc;;;;;;wBACpC,WAAW,GAAG,IAAI,GAAG,WAAW,CAAC;wBACrC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;wBACvD,qBAAM,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAA1E,MAAM,GAAG,SAAiE,CAAC;;;;;KAC5E;IAEK,sCAAY,GAAlB,UAAmB,OAAO,EAAE,MAAM;;;;;4BACpB,qBAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE;;wBAA/C,IAAI,GAAG,SAAwC;wBACnD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACL,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;4BAC9C,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;4BAC1D,IAAI,CAAC,MAAM,GAAG,iEAAc,CAAC,OAAO,CAAC,CAAC;4BACtC,IAAI,CAAC,GAAG,GAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;wBAC9B,CAAC;wBACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACV,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;wBAClB,CAAC;wBACF,sBAAO,IAAI,CAAC,MAAM,EAAC;;;;KACpB;IAEK,oCAAU,GAAhB,UAAiB,IAAY,EAAE,OAAe;;;;;;wBACxC,WAAW,GAAG,IAAI,GAAG,WAAW;wBAC1B,qBAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;;wBAA7B,GAAG,GAAG,SAAuB;6BAC7B,GAAG,EAAH,wBAAG;wBACD,QAAM,IAAI,+DAAO,EAAE,CAAC;wBACxB,KAAG,CAAC,OAAO,GAAG,OAAO,CAAC;wBACtB,KAAG,CAAC,SAAS,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC;wBACnD,KAAG,CAAC,aAAa,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;wBAC3D,KAAG,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC;wBACjD,IAAI,CAAC,MAAM,GAAG,mEAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAG,CAAC,aAAa,GAAG,oBAAoB,GAAG,IAAI,CAAC,OAAO,EAAE,EAAI,UAAC,GAAG;4BAC3G,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAG,CAAC,CAAC;wBAC7B,CAAC,CAAC,CAAC;wBAEC,MAAM,GAAG,iEAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBACzC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;wBACjE,qBAAM,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;wBAAjE,SAAiE,CAAC;wBAClE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;wBAC3B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,2BAA2B,EAAE,KAAG,CAAC,CAAC;wBACtD,sBAAO,IAAI,CAAC,GAAG,EAAC;;wBAIhB,OAAO,CAAC,KAAK,CAAC,0BAA0B,GAAG,WAAW,CAAC;;;;;;KAE1D;IACD,YAAY;IAGN,+CAAqB,GAA3B;;;;;;KAEC;IAGD,oBAAoB;IACpB,qFAAqF;IACrF,mCAAS,GAAT,UAAU,GAAQ,EAAE,GAAW;QAC7B,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACjD,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACrD,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;QACjD,MAAM,CAAC,YAAY,CAAC;IACtB,CAAC;IACD,oCAAU,GAAV,UAAW,YAAY,EAAE,GAAW;QAClC,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;QAC1C,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;QACxE,MAAM,CAAC,gBAAgB,CAAC;IAC1B,CAAC;IACD,uCAAa,GAAb,UAAc,OAAc,EAAE,GAAW;QACvC,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QAC9C,MAAM,CAAC,YAAY,CAAC;IACtB,CAAC;IACD,uCAAa,GAAb,UAAc,OAAe,EAAE,GAAW;QACxC,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QACrC,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IACD,qCAAW,GAAX;QACE,MAAM,CAAO,MAAO,CAAC,IAAI,EAAE,CAAC;IAC9B,CAAC;IACD,YAAY;IAIZ,WAAW;IACL,sCAAY,GAAlB;;;;4BACE,qBAAM,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;wBAArE,SAAqE,CAAC;;;;;KACvE;IAGD,uCAAa,GAAb;QAEE,sCAAsC;QACtC,sCAAsC;QAEtC,cAAc;QACd,+BAA+B;QAC/B,6EAA6E;QAC7E,qDAAqD;QACrD,oBAAoB;QACpB,MAAM;QAEN,qBAAqB;QAErB,qBAAqB;QACrB,mDAAmD;QACnD,qDAAqD;QACrD,gCAAgC;QAChC,MAAM;QAEN,qBAAqB;QAGrB,4EAA4E;QAC5E,+EAA+E;QAC/E,sCAAsC;QACtC,4CAA4C;QAE5C,oEAAoE;IAEtE,CAAC;IAED,iCAAO,GAAP;QACE,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC;QACf,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAUD,qCAAW,GAAX;QAEE,uBAAuB;QACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QAEpC,oBAAoB;QACpB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAE9C,oBAAoB;QACpB,UAAU;QAEV,MAAM,CAAC,MAAM,CAAC;IAEhB,CAAC;IAED,qCAAW,GAAX;QACE,eAAe;QACf,eAAe;QAEf,cAAc;QACd,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,UAAU,EAAE,EAAC,MAAM,EAAE,GAAG,EAAC,CAAE,CAAC;QAGhH,oBAAoB;IAEtB,CAAC;IAED,mCAAS,GAAT;QAEE,eAAe;QACf,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEjC,yBAAyB;QAEzB,WAAW;QAEX,UAAU;QAGV,aAAa;IAGf,CAAC;IAKD,iCAAO,GAAP,UAAQ,QAAQ,EAAE,OAAO;QACtB,WAAW;QACX,IAAI,OAAO,GAAG,iEAAc,EAAE,CAAC;QAC/B,gDAAgD;QAChD,OAAO,GAAG,mEAAgB,CAAC,OAAO,EAAE,OAAO,EAAG,aAAG;YAE9C,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;IAClB,CAAC;IAliBU,eAAe;QAD3B,iEAAU,EAAE;yCAcM,6DAAM;YACP,2DAAI;YACS,8EAAiB;OAfnC,eAAe,CAimB3B;IAAD,sBAAC;CAAA;AAjmB2B;;;;;;;;;;;;;;;;;;;;;;;AC5Ba;AACO;AACZ;AAC2C;AACzB;AACT;AACQ;AAiBrD;IAAA;IAA+B,CAAC;IAAnB,eAAe;QAf3B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yDAAS;aACV;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;gBACnC,gGAAyB;gBACzB,4EAAc;gBACd,mEAAW;gBACX,2EAAmB;aACpB;YACD,SAAS,EAAE,EAEV;SACF,CAAC;OACW,eAAe,CAAI;IAAD,sBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBe;AAEN;AACuD;AAG7D;AACE;AAEM;AAGvC;;;;;EAKE;AAEF;IAKE,0CAA0C;IAG1C,sBAAmB,MAAc,EAAS,IAAU;QAAjC,WAAM,GAAN,MAAM,CAAQ;QAAS,SAAI,GAAJ,IAAI,CAAM;QANpD,gDAAgD;QAChD,YAAY;QACZ,QAAG,GAAG,iCAAiC,CAAC;IAMxC,CAAC;IAEK,gCAAS,GAAf,UAAiB,EAAE,EAAE,OAAO,EAAE,OAAO;;;;;;wBAEnC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,EAAC;4BAC/B,KAAK,CAAC,2BAA2B,CAAC,CAAC;4BACnC,MAAM,gBAAC;wBACT,CAAC;wBAEG,IAAI,GAAG;4BACT,IAAI,EAAE,EAAE;4BACR,SAAS,EAAE,OAAO;4BAClB,SAAS,EAAE,OAAO;yBACnB,CAAC;wBACE,WAAW,GAAG,IAAI,qEAAc,EAAE,CAAC;wBACvC,WAAW,CAAC,OAAO,GAAG,IAAI,8DAAO,CAC/B;4BACE,cAAc,EAAE,kBAAkB;yBACnC,CACF,CAAC;wBAES,qBAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC,SAAS,EAAE;;wBAApF,IAAI,GAAG,SAA6E;wBACxF,sBAAO,IAAI,EAAC;;;;KAEb;IAED,iCAAU,GAAV;IAEA,CAAC;IAtCU,YAAY;QADxB,iEAAU,EAAE;yCASgB,6DAAM,EAAe,2DAAI;OARzC,YAAY,CAwCxB;IAAD,mBAAC;CAAA;AAxCwB;;;;;;;;;;;;;;;;;;;;;ACnBgB;AACO;AACV;AACyC;AAW/E;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAT5B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;gBACpC,gGAAyB;aAC1B;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;ACdgC;AAC3B;AAC+B;AACc;AAC/E,iFAAiF;AAgB/E;IAAA;IAAyB,CAAC;IAAb,UAAU;QAdxB,+DAAQ,CAAC;YACN,YAAY,EAAE;gBACZ,uDAAQ;aAET;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;gBAClC,gGAAyB;aAC1B;YACD,eAAe,EAAE;gBACb,uDAAQ;aACX;YACD,OAAO,EAAE,CAAE,qEAAsB,CAAE;SACpC,CAAC;OACW,UAAU,CAAG;IAAD,iBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB4B;AACP;AAIT;AACa;AAGT;AACqB;AACI;AAClB;AAYhD,qDAAqD;AAErD,yHAAyH;AACzH,8DAA8D;AAO9D;IAYI,kBACW,OAAsB,EACtB,WAA8B,EAC9B,aAA4B,EAC5B,eAAgC,EAChC,SAA0B;QAJ1B,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,kBAAa,GAAb,aAAa,CAAe;QAC5B,oBAAe,GAAf,eAAe,CAAiB;QAChC,cAAS,GAAT,SAAS,CAAiB;QAdrC,eAAU,GAAG,KAAK,CAAC;QACnB,eAAU,GAAG,OAAO,CAAC;QACrB,aAAQ,GAAG,qBAAqB,CAAC;IAejC,CAAC;IAEK,iCAAc,GAApB;;;gBAEI,oBAAoB;gBACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;;;;KAInB;IAED,uBAAI,GAAJ;QAEI,iCAAiC;QACjC,iCAAiC;QACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;YAC9B,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI;SAC7C,CAAC,CAAC;IACP,CAAC;IAEK,2BAAQ,GAAd,UAAe,QAAQ;;;;;4BAGA,qBAAM,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC;;wBAA/E,YAAY,GAAG,SAAgE;wBACnF,IAAI,CAAC,IAAI,EAAE,CAAC;;;;;KAKf;IAEK,0BAAO,GAAb;;;;gBACQ,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;gBACxG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;;;KACzB;IAED,2BAAQ,GAAR;QAAA,iBAgDC;QA9CG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACnC,OAAO,EAAE,gBAAgB;SAC1B,CAAC,CAAC;QACL,yBAAyB;QAEzB,IAAI,SAAS,GAAQ,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QAC5D,IAAI,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAEnC,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,IAAI,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC;QAC7B,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;QACzC,IAAI,YAAY,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,KAAK,GAAS,QAAS,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC;QAChE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC/B,MAAM,CAAC;QACX,CAAC;QACD,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACnD,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAC9B,wDAAwD;QACxD,MAAM,CAAC,SAAS,GAAG,UAAC,GAAQ;YACxB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC3C,2EAA2E;gBAC3E,sDAAsD;gBACtD,mDAAmD;gBACnD,qDAAqD;YACzD,CAAC;YACD,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC3B,6CAA6C;QACjD,CAAC,CAAC;QAEF,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC;QACvC,kCAAkC;QAClC,MAAM,CAAC,MAAM,GAAG,UAAC,GAAQ;YACrB,IAAI,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;YACpC,KAAI,CAAC,SAAS,GAAG,WAAW,CAAC;YAC7B,kBAAkB;YAClB,IAAI,OAAO,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;YAC1C,gCAAgC;YAChC,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAC5B,CAAC,CAAC;QACF,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,4BAAS,GAAT,UAAU,OAAO;QAAjB,iBAwCC;QAvCG,qEAAqE;QACrE,IAAI,QAAQ,GAAG,MAAM,CAAC,sBAAsB,CAAC,CAAC;QAE9C,QAAQ,CAAC,SAAS,GAAG,gDAAgD,CAAC;QACtE,oDAAa,CAAC,eAAe,CAAC,IAAI,oDAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAErE,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAE1D,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,GAAG;YACzB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,IAAI,UAAU,GAAG,CAAC,CAAC;YACnB,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gBAC9B,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBAC3B,IAAI,KAAK,GAAG,GAAG,CAAC;gBAChB,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAEvC,2CAA2C;gBAC3C,IAAI,MAAM,GAAQ,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;gBACxD,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBACtC,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;gBAChC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;gBAE9B,sCAAsC;gBACtC,IAAI,aAAa,GAAG;oBAChB,aAAa,EAAE,OAAO;oBACtB,QAAQ,EAAE,QAAQ;iBACrB,CAAC;gBACF,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;gBAC5C,UAAU,CAAC,IAAI,CAAC;oBACZ,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBAC3B,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QAEP,CAAC,EAAE,UAAC,MAAM;YACN,oBAAoB;YACpB,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACtB,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,kCAAe,GAAf,UAAgB,GAAG;QACf,IAAI,CAAC,qBAAqB,CAAC,GAAG,EAAE,UAAC,MAAM;YACnC,IAAI,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YACnC,kDAAkD;QACtD,CAAC,CAAC,CAAC;IACP,CAAC;IAED,mCAAgB,GAAhB,UAAiB,eAAe;QAC5B,0DAA0D;QAC1D,IAAI,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;QACtD,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB,IAAI,WAAW,GAAG,IAAI,WAAW,CAAC,GAAG,CAAC,CAAC;QACvC,IAAI,OAAO,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;IAED,wCAAqB,GAArB,UAAsB,QAAQ,EAAE,QAAQ;QACpC,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,GAAG,IAAI,UAAU,EAAE,CAAC;QACzB,CAAC,CAAC,MAAM,GAAG,UAAC,CAAM;YACd,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC,CAAC;QACF,CAAC,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;IAC7B,CAAC;IAED,uEAAuE;IACvE,2BAAQ,GAAR;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB;YAEI,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;YAElC,IAAI,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,EACnD,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,EAC/C,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;YAE5D,UAAU,CAAC,gBAAgB,CAAC,QAAQ,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;YAEhE,qBAAqB;YACrB,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;YAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;gBACb,YAAY;gBACZ,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;gBAC5D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;gBAC7D,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;YAChE,CAAC;QACL,CAAC;QAED,uBAAuB,CAAC;YACpB,IAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAEpD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YAEnB,QAAQ,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,GAAG,OAAO,GAAG,wBAAwB,CAAC,CAAC;QACtF,CAAC;QAED,2BAA2B,CAAC;YACxB,wBAAwB;YACxB,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC;YAEnD,iCAAiC;YACjC,aAAa,CAAC,CAAC,CAAC,CAAC;YAGjB,2BAA2B;YAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnC,gBAAgB;gBAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,UAAU,CAAC,CAAC,CAAC,CAAC;YAElB,CAAC;QACL,CAAC;QAED,SAAS;QACT,gBAAgB,GAAG;YACf,WAAW;YACX,IAAI,CAAC,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC5C,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC;QACtB,CAAC;QAGD,6BAA6B,CAAC;YAC1B,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;YAEpD,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC;YACvB,CAAC;QACL,CAAC;QAED,4BAA4B,CAAC;YACzB,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;YAEpD,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC;YAC1B,CAAC;QACL,CAAC;QAED,oBAAoB,IAAI;YAEpB,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,EAC1B,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAC,EACxD,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,EAC/C,aAAa,GAAG,IAAI,CAAC,CAAC,QAAQ;YAClC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;gBACb,kCAAkC;gBAClC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,aAAa,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;oBAC3C,eAAe;oBACf,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;oBAC9B,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;oBACrE,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,kBAAkB,EAAE,KAAK,CAAC,CAAC;oBAEnE,yBAAyB;oBACzB,GAAG,CAAC,kBAAkB,GAAG,UAAU,CAAC;wBAChC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;4BACtB,sBAAsB;4BAEtB,oEAAoE;4BACpE,kCAAkC;wBACtC,CAAC;oBACL,CAAC,CAAC;oBAEF,eAAe;oBACf,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;oBAC3E,GAAG,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,GAAG,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,qBAAqB,CAAC,CAAC;oBAC5D,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACnB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,MAAM,CAAC,kCAAkC,GAAG,aAAa,GAAG,OAAO,CAAC,CAAC;gBACzE,CAAC;YACL,CAAC;QACL,CAAC;QAED,0CAA0C;QAC1C,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;YACtD,IAAI,EAAE,CAAC;QACX,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QAChE,CAAC;IACL,CAAC;IAID,8BAAW,GAAX,UAAY,QAAQ;QAApB,iBAsCC;QApCG,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9B,KAAK,EAAE,eAAe;YACtB,MAAM,EAAE;gBACJ;oBACI,IAAI,EAAE,UAAU;oBAChB,WAAW,EAAE,EAAE;oBACf,KAAK,EAAE,QAAQ;iBAClB;aACJ;YACD,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE,cAAI;wBACT,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAClC,CAAC;iBACJ;gBACD;oBACI,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,cAAI;wBAET,YAAY;wBAEZ,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;wBAE7B,EAAE,CAAC,CAAC,IAAY,CAAC,CAAC,CAAC;4BACf,aAAa;wBACjB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACJ,gBAAgB;4BAChB,MAAM,CAAC,KAAK,CAAC;wBACjB,CAAC;oBACL,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAGK,6BAAU,GAAhB;;;;;;4BAKkB,qBAAM,SAAS,CAAC,YAAY,CAAC,gBAAgB,EAAE;;wBAAzD,OAAO,GAAG,SAA+C;wBAAC,CAAC;wBAG3D,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,UAAC,MAAM,IAAO,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,YAAY,IAAI,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;wBAGtH,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;4BACb,YAAY,GAAG;gCACX,QAAQ,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,QAAQ,EAAE;6BAC3C,CAAC;wBACN,CAAC;wBACD,IAAI,CAAC,CAAC;4BACF,YAAY,GAAG,IAAI,CAAC;wBACxB,CAAC;wBAGG,WAAW,GAAG;4BACd,KAAK,EAAE,YAAY;yBACtB,CAAC;wBAEE,UAAU,GAAG,UAAU,KAAK,EAAE,GAAG;4BACjC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;4BAChB,KAAK,CAAC,IAAI,EAAE,CAAC;wBACjB,CAAC,CAAC;wBAeE,OAAO,GAAG,UAAC,KAAK;4BAChB,IAAI,YAAY,GAAG,SAAS,CAAC,YAAY,CAAC;4BAC1C,YAAY,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;gCACxD,IAAI,WAAW,GAAG,MAAM,CAAC,cAAc,EAAE,CAAC;gCAC1C,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,WAAW,CAAC,CAAC;gCACzD,OAAO,CAAC,GAAG,CAAC,sBAAsB,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gCAC3D,gCAAgC;gCAChC,iCAAiC;gCACjC,KAAK;gCACL,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,qCAAqC;gCAC7D,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC;4BAC7B,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,GAAG;gCAClB,cAAc;gCACd,KAAK,CAAC,qCAAqC,CAAC,CAAC;4BACjD,CAAC,CAAC,CAAC;wBACP,CAAC,CAAC;wBAIE,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC3B,OAAO,CAAC,KAAK,CAAC,CAAC;wBAEf,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBAExD,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;4BACnB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;wBACxD,CAAC,CAAC,CAAC;wBAEH,CAAC,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;;;;KAE/C;IAED,0BAAO,GAAP;QACI,IAAI,CAAC;YACD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YAC7D,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;YAC3C,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACpC,IAAI,QAAQ,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC;YAC7C,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC;QAChC,CAAC;QAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACT,KAAK,CAAC,qBAAqB,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;QAC7C,CAAC;IAEL,CAAC;IAGD,oCAAiB,GAAjB;QAAA,iBAsBC;QArBG,IAAM,WAAW,GAAG,UAAU,CAAC,uBAAuB,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,aAAa,CAAC,CAAC;QAChG,IAAM,aAAa,GAAG,oEAAoE,CAAC;QAE3F,EAAE,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,IAAI,UAAU,CAAC,CAAC,CAAC;YAEvD,gBAAgB;YAChB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAChC,eAAe;YACf,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;gBAC/B,cAAc;gBACd,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;YAClC,CAAC,CAAC,CAAC;QACP,CAAC;QAED,EAAE,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,IAAI,IAAI,qBAAqB,CAAC,CAAC,CAAC;YAClE,cAAc;YACd,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QAClC,CAAC;IAIL,CAAC;IAGD,8BAAW,GAAX,UAAY,SAAS;QACjB,IAAM,cAAc,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;QAC9C,IAAM,IAAI,GAAG,eAAe,CAAC;QAC7B,IAAI,WAAW,GAAG,4BAA4B,CAAC;QAE/C,2BAA2B;QAC3B,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,WAAW,EAAE,cAAc,CAAC;aACvD,IAAI,CAAC,UAAC,SAAS;YACZ,OAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,SAAS,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;IACX,CAAC;IAED,8BAAW,GAAX,UAAY,SAAS;QACjB,IAAM,cAAc,GAAG;YACnB,OAAO,EAAE,IAAI;SAChB,CAAC;QACF,IAAI,WAAW,GAAG,4DAA4D,CAAC;QAE/E,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,qBAAW;YACnE,OAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,WAAW,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;IACP,CAAC;IArdQ,QAAQ;QAJpB,gEAAS,CAAC;YACP,QAAQ,EAAE,WAAW;WACG;SAC3B,CAAC;qFAcmC;YACT,gFAAiB;YACf,mFAAa;YACX,sEAAe;YACrB,KAAe;OAjB5B,QAAQ,CAwdpB;IAAD,CAAC;AAAA;SAxdY,QAAQ,e;;;;;;;;;;;;;;;;;;;AClCsB;AAG3C;IAKI;QAEI,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC;IAEjC,CAAC;IATQ,aAAa;QADzB,iEAAU,EAAE;;OACA,aAAa,CAUzB;IAAD,oBAAC;CAAA;AAVyB;;;;;;;;;;;;;;;;;;;;;ACHe;AACO;AACd;AAC6C;AAW/E;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAT1B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;gBAClC,gGAAyB;aAC1B;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACde;AACK;AACkB;AACjB;AAW9C;IAIE,4BAAmB,QAAwB,EAAS,eAAgC,EAAU,SAA0B;QAArG,aAAQ,GAAR,QAAQ,CAAgB;QAAS,oBAAe,GAAf,eAAe,CAAiB;QAAU,cAAS,GAAT,SAAS,CAAiB;QACpH,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC;IAE9C,CAAC;IAED,kCAAK,GAAL;QACE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAEK,2CAAc,GAApB,UAAqB,gBAAgB;;;;;4BACjC,qBAAM,IAAI,CAAC,eAAe,CAAC,cAAc,CAAE,IAAI,CAAC,GAAG,CAAE;;wBAArD,SAAqD,CAAC;wBAClD,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BAC9B,OAAO,EAAE,mBAAmB;4BAC5B,QAAQ,EAAE,IAAI;4BACd,QAAQ,EAAE,QAAQ;yBACnB,CAAC,CAAC;wBACL,KAAK,CAAC,OAAO,EAAE,CAAC;wBAEhB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;;;;;KAC3B;IAvBU,kBAAkB;QAThC,gEAAS,CAAC;YACP,QAAQ,EAAE,0MAMT;SACF,CAAC;yCAK6B,qEAAc,EAA0B,mFAAe,EAAqB,sEAAe;OAJ7G,kBAAkB,CAyB9B;IAAD,yBAAC;CAAA;AAzB8B;;;;;;;;;;;;ACd0C;AAElC;AAEzC,yGAAsB,EAAE,CAAC,eAAe,CAAC,8DAAS,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJM;AACJ;AACyD;AACvD;AACH;AACM;AACjB;AACY;AACT;AAEL;AACoB;AACS;AACd;AACgB;AACZ;AACG;AACG;AACa;AAG9E,kDAAkD;AAClD,8DAA8D;AAEP;AACG;AACe;AAChB;AACM;AACN;AACU;AAuDnE;IAAA;IAAwB,CAAC;IAAZ,SAAS;QAlDrB,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,6DAAK;gBACL,kFAAkB;aACnB;YACD,OAAO,EAAE;gBACP,gFAAa;gBACb,kEAAW,CAAC,OAAO,CAAC,6DAAK,EAAE;oBACzB,cAAc,EAAE,IAAI;iBACrB,EACL;oBACE,KAAK,EAAE;wBACL,EAAE,YAAY,EAAE,sDAAsD,EAAE,IAAI,EAAE,cAAc,EAAE,OAAO,EAAE,gBAAgB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,UAAU,CAAC,EAAE;wBACxK,EAAE,YAAY,EAAE,6CAA6C,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,cAAc,EAAE,UAAU,CAAC,EAAE;wBACzK,EAAE,YAAY,EAAE,gDAAgD,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,cAAc,EAAE,UAAU,CAAC,EAAE;wBACvM,EAAE,YAAY,EAAE,sCAAsC,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBAChI,EAAE,YAAY,EAAE,0CAA0C,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,WAAW,EAAE,cAAc,EAAE,UAAU,CAAC,EAAE;qBAClL;iBACF,CAAC;gBACE,wFAAgB;gBAChB,wDAAY;gBACZ,iEAAU;gBACV,kEAAW;gBACX,oEAAU;gBACV,oFAAkB;gBAClB,wEAAc;gBACd,2EAAe;gBACf,8EAAgB;gBAChB,4EAAc;gBACd,mEAAW;gBACX,iGAAyB;aAC1B;YACD,SAAS,EAAE,CAAC,+DAAQ,CAAC;YACrB,eAAe,EAAE;gBACf,6DAAK;gBACL,kFAAkB;aACnB;YACD,SAAS,EAAE;gBACT,2EAAS;gBACT,iFAAY;gBACZ,wFAAiB;gBACjB,4EAAW;gBACX,8FAAoB;gBACpB,8EAAY;gBACZ,gFAAa;gBACb,EAAC,OAAO,EAAE,2DAAY,EAAE,QAAQ,EAAE,wEAAiB,EAAC;gBACpD,oFAAe;gBACf,8EAAY;aACb;SACF,CAAC;OACW,SAAS,CAAG;IAAD,gBAAC;CAAA;AAAH;;;;;;;;;;;;ACrFmC;AAEzD;IAyCI;IAEA,CAAC;IAxCD,UAAU;IACV,uBAAO,GAAP;QACI,WAAW;QACX,IAAI,OAAO,GAAG,iEAAc,EAAE,CAAC;QAC/B,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IACD,iBAAiB;IACjB,2BAAW,GAAX,UAAY,IAAI;QACZ,MAAM,CAAC,iEAAc,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAED,gBAAgB;IAChB,6BAAa,GAAb,UAAc,MAAM;QAChB,MAAM,CAAC,iEAAc,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,wDAAwD;IACxD,wBAAQ,GAAR,UAAS,IAAI,EAAE,MAAM;QACjB,MAAM,CAAC,kEAAe,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACzC,CAAC;IAED,2BAA2B;IAC3B,uBAAO,GAAP,UAAQ,GAAG;QACP,MAAM,CAAC,iEAAc,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAED,oBAAoB;IACpB,uBAAO,GAAP,UAAQ,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI;QAChC,IAAI,GAAG,mEAAgB,CAAC,IAAI,EAAE,MAAM,EAAE,aAAG;YACrC,GAAG,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;QACzB,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,0BAAU,GAAV,UAAW,GAAG;QACV,MAAM,CAAC,uEAAoB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,eAAK,IAAI,QAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,EAAnD,CAAmD,CAAC;IACtG,CAAC;IAML,YAAC;AAAD,CAAC;;AAED,0BAA0B;;;;;;;;;;;;;;;;;;;;;;ACjDuB;AACH;AACoB;AAGlE;;;;;GAKG;AAKH;IAOE,6BAAoB,GAAkB,EAAU,eAAgC;QAA5D,QAAG,GAAH,GAAG,CAAe;QAAU,oBAAe,GAAf,eAAe,CAAiB;QAC9E,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QACnD,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC;IAC5B,CAAC;IAED,mCAAK,GAAL,UAAM,IAAI;QACR,OAAO;QACP,oBAAoB;QACpB,IAAI;QACJ,aAAa;QACb,sBAAsB;QACtB,KAAK;QACL,CAAC,CAAC,iBAAiB,CAAC,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE;YAClB,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI;SAC3C,CAAC,CAAC;IACL,CAAC;IApBQ;QAAR,4DAAK,EAAE;;2DAAY;IAHT,mBAAmB;QAJ/B,gEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACQ;SAChC,CAAC;4BAQgF;OAPrE,mBAAmB,CAyB/B;IAAD,CAAC;AAAA;SAzBY,mBAAmB,W;;;;;;;ACfhC,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;;;;;;;;;;;;;;;ACA8D;AACE;AACpB;AACc;AACS;AACN;AAc7D;IAAA;IAOA,CAAC;kCAPY,yBAAyB;IAC3B,iCAAO,GAAd;QACI,MAAM,CAAC;YACH,QAAQ,EAAE,2BAAyB;YACnC,SAAS,EAAE,EAAE;SAChB,CAAC;IACN,CAAC;IANQ,yBAAyB;QAZrC,+DAAQ,CAAC;YACN,YAAY,EAAE,CAAC,qFAAmB;gBAC9B,+EAAiB;gBACrB,kFAAkB,CAAC;YACnB,OAAO,EAAE;gBACL,kEAAW;gBACX,uFAAgB;aACnB;YACD,OAAO,EAAE,CAAC,qFAAmB;gBACzB,+EAAiB;gBACrB,kFAAkB,CAAC;SACtB,CAAC;OACW,yBAAyB,CAOrC;IAAD,gCAAC;;CAAA;AAPqC;;;;;;;;;;;;;;;;;;;;;ACnByC;AACjC;AAK9C;;;;;GAKG;AAIH;IAOE,+BAAmB,OAAmB,EAAS,QAAkB,EAAS,OAAsB;QAA7E,YAAO,GAAP,OAAO,CAAY;QAAS,aAAQ,GAAR,QAAQ,CAAU;QAAS,YAAO,GAAP,OAAO,CAAe;IAEhG,CAAC;IAED,+CAAe,GAAf;QAGE,IAAI,CAAC,UAAU,EAAE,CAAC;QAElB,qFAAqF;QACrF,4FAA4F;QAC5F,0FAA0F;QAE1F,gEAAgE;QAChE,wEAAwE;QAExE,6BAA6B;QAC7B,wBAAwB;QAExB,MAAM;IAEV,CAAC;IAED,2CAAW,GAAX;QACE,uBAAuB;QACvB,0BAA0B;QAC1B,kCAAkC;QAClC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,iBAAiB;IAEjB,iCAAiC;IACjC,gCAAgC;IAEhC,iCAAiC;IACjC,6FAA6F;IAC7F,2FAA2F;IAC3F,UAAU;IAEV,IAAI;IAEJ,0CAAU,GAAV;QAEE,IAAG,CAAC;YACF,IAAI,CAAC,SAAS,GAAI,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE;gBAC5D,QAAQ,EAAE,YAAY;aACvB,CAAC,CAAC;QAGL,CAAC;QACD,KAAK,EAAC,CAAC,CAAC,EAAC,EAAC;QAIV,6CAA6C;QAC7C,yBAAyB;QACzB,iBAAiB;QACjB,oCAAoC;QACpC,eAAe;QACf,oBAAoB;QACpB,qBAAqB;QACrB,sBAAsB;QACtB,kBAAkB;QAClB,QAAQ;QACR,OAAO;QACP,mCAAmC;QAEnC,iCAAiC;QAEjC,iCAAiC;QACjC,8DAA8D;QAC9D,8DAA8D;QAE9D,oCAAoC;QACpC,oDAAoD;QACpD,sDAAsD;QAEtD,wDAAwD;QACxD,iCAAiC;QACjC,gCAAgC;QAEhC,8DAA8D;QAC9D,8CAA8C;QAE9C,wCAAwC;QACxC,wCAAwC;QACxC,QAAQ;IAMV,CAAC;IAlGqB;QAAnB,4DAAK,CAAC,WAAW,CAAC;;4DAAgB;IAChB;QAAlB,4DAAK,CAAC,UAAU,CAAC;;2DAAe;IAJtB,qBAAqB;QAHjC,gEAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB,CAAC,qBAAqB;SAClD,CAAC;yCAQ4B,yDAAU,EAAmB,uDAAQ,EAAkB,oEAAa;OAPrF,qBAAqB,CAwGjC;IAAD,4BAAC;CAAA;AAxGiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfe;AAEmB;AACL;AACxB;AAC+B;AACrC;AAIjC;;GAEG;AAKH;IAOE,4BACS,eAAgC,EAChC,MAAc,EACd,iBAAoC;QAFpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,sBAAiB,GAAjB,iBAAiB,CAAmB;IAG7C,CAAC;IAED,qCAAQ,GAAR;QAAA,iBA0BC;QAvBC,IAAI,CAAC,GAAG,GAAG,IAAI,gEAAQ,EAAE,CAAC;QAE1B,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,EAAC;YACnC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC;YAC3C,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;QACD,IAAI,EAAC;YACH,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,+BAA+B,EAAE,UAAO,UAAU;;oBAC1F,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC;oBACtB,IAAI,CAAC,UAAU,EAAE,CAAC;;;iBACnB,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,2BAA2B,EAAE,UAAO,GAAG;;;gBAEnF,UAAU,CAAE;oBACV,KAAI,CAAC,UAAU,EAAE,CAAC;gBACpB,CAAC,EAAE,IAAI,CAAE,CAAC;;;aAGX,CAAC,CAAC;IAGL,CAAC;IAED,wCAAW,GAAX;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAC;YACrB,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;QAClC,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC;YACzB,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;QACtC,CAAC;IACH,CAAC;IAEK,uCAAU,GAAhB;;;;gBAGE,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;;;;oCACG,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;;gCAA/D,OAAO,GAAQ,SAAgD;gCAEnE,CAAC,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gCAEpC,QAAQ,GAAG,EAAE,CAAC;gCAEd,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAE,UAAC,EAAE,IAAK,SAAE,CAAC,SAAS,EAAZ,CAAY,CAAE,CAAC,MAAM,EAAE,CAAC;oDAE/E,IAAI;oCAEX,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;oCACvB,IAAI,UAAU,GAAG,oCAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oCAEvC,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;oCACzB,IAAG,CAAC;wCACF,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,CAAC;oCACzC,CAAC;oCACD,KAAK,EAAC,CAAC,CAAC,EAAC;wCAAC,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;oCAAC,CAAC;oCAAA,CAAC;oCAElD,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC;oCAC/B,IAAI,QAAQ,GAAG,YAAY,GAAG,GAAG,CAAC;oCAElC,OAAK,iBAAiB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI,CAAE,UAAC,MAAM;wCACnD,CAAC,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;oCACxC,CAAC,CAAC,CAAC;oCAEH,QAAQ,GAAI,QAAQ,IAAG,6EAET,QAAQ,gMAEM,UAAU,+BAC9B,IAAI,CAAC,KAAK,4BACX,IAAI,CAAC,OAAO,2FAIlB,EAAC;gCACJ,CAAC;;gCA7BD,GAAG,CAAC,OAA4B,EAAf,mCAAe,EAAf,6BAAe,EAAf,IAAe;oCAAvB,IAAI;4CAAJ,IAAI;iCA6BZ;gCAGD,6BAA6B;gCAC3B,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gCACjC,CAAC,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;;;;qBAI5D,CAAC,CAAC;;;;KAGJ;IAED,qCAAQ,GAAR;QACE,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QACrC,CAAC,CAAC,uBAAuB,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;IACtD,CAAC;IAEK,uCAAU,GAAhB;;;;4BACE,qBAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC;;wBAAlE,SAAkE,CAAC;wBACnE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;wBAC/D,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;;;;KAKrB;IAzHU,kBAAkB;QAJ9B,gEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACQ;SAC/B,CAAC;0EASyC;YACxB,uFAAM;YACK,eAAiB;OAVlC,kBAAkB,CA2H9B;IAAD,CAAC;AAAA;SA3HY,kBAAkB,W;;;;;;;ACjB/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 197;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 197\n// module chunks = 1","var map = {\n\t\"../pages/annotate/annotate.module\": [\n\t\t243\n\t],\n\t\"../pages/email/email.module\": [\n\t\t393\n\t],\n\t\"../pages/home/home.module\": [\n\t\t483\n\t],\n\t\"../pages/review/review.module\": [\n\t\t482\n\t],\n\t\"../pages/sign/sign.module\": [\n\t\t486\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 242;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 242\n// module chunks = 1","import { IonicPageModule } from \"ionic-angular\";\nimport { AnnotatePage } from \"./annotate\";\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from \"@angular/core\";\n//import { AbsoluteDragDirective } from '../../directives/absolute-drag/absolute-drag';\nimport { BlockStepsComponentModule } from '../../components/components.module';\n\n@NgModule({\n    declarations: [\n        AnnotatePage,\n        \n        //AbsoluteDragDirective\n    ],\n    imports: [\n      IonicPageModule.forChild(AnnotatePage),\n      BlockStepsComponentModule\n    ],\n    entryComponents: [\n        AnnotatePage\n    ],\n    schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\n  })\n  export class AnnotatePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/annotate/annotate.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { NavController, NavParams, IonicPage, Segment, Events } from 'ionic-angular';\nimport { DocumentService } from '../../services/document.service';\nimport 'rxjs/add/operator/retry';\nimport 'rxjs/add/operator/timeout';\nimport 'rxjs/add/operator/delay';\nimport 'rxjs/add/operator/map';\n\ndeclare var $: any;\ndeclare var window: any;\ndeclare var blockstack: any;\n\n/// https://www.sitepoint.com/custom-pdf-rendering/\n@IonicPage({\n  name: 'AnnotatePage',\n  segment: 'annotate/:guid',\n  defaultHistory: ['HomePage']\n})\n@Component({\n  selector: 'page-annotate',\n  templateUrl: 'annotate.html',\n  styles: ['annotate.scss']\n})\nexport class AnnotatePage {\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams, \n    public documentService: DocumentService,\n    public events: Events\n  ) {\n   \n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/annotate/annotate.ts","export class Document{\n    public fileName: string;\n    public documentKey: string; // the key to decrypt the doc\n    public guid: any;\n    public createdAt: Date; \n    public updatedAt: Date; \n    public owner: Array<string>; // [\"nicktee.id\"] \n    public signer: Array<string>; // [\"nicktee.id || emailAddress\"] //  for now just 1 signer, in the future allow users without a blockstack id to sign, there name has no .id in it like [\"Alice Smith\"]\n    public reviewer: Array<string>; // [\"auditor.id\"] owners and signers are automatically reviewers\n    public hasAnnotations: boolean;\n    public step: string; // Annotate, Sign, Final\n    public isCompleted: boolean;\n    public annotationsRequired: Array<any>; // [ {\"Sign\": \"nicktee.id\"}, { Sign: \"blockusign1.id\" } ]\n    \n    public pathAnnotatedDoc: string; // fully qualified gaia path to the Annotated doc , this is usually in the owners storage bucket\n    //public pathSignedDoc: string; // fully qualified gaia path to the Signed doc, this is usually in the signers bucket\n    public paths: Array<NameStorageMapping>;\n\n    constructor() {\n        this.guid = (<any>window).guid();\n        this.createdAt = (<any>Date).now();\n        this.updatedAt = (<any>Date).now();\n        this.hasAnnotations = false;\n        this.step = \"Annotate\";\n        this.isCompleted = false\n    }\n}\n\nexport class Log {\n    public guid: any;\n    public createdAt: Date; \n    public updatedAt: Date; \n    public messages: Array<Message>;\n\n    constructor(){\n        this.guid = (<any>window).guid();\n        this.createdAt = (<any>Date).now();\n        this.updatedAt = (<any>Date).now();\n    }\n\n}\n\nexport class Message {\n    public guid: any;\n    public createdAt: Date; \n    public updatedAt: Date; \n    public message: string;\n    public createdBy: string;\n    public createdByName: string;\n    public email: string;\n\n    constructor(){\n        this.guid = (<any>window).guid();\n        this.createdAt = (<any>Date).now();\n        this.updatedAt = (<any>Date).now();\n    }\n\n}\n\n// This is an svg representing the annotations\nexport class Annotation{\n    public annotations: string;\n    constructor(){\n    \n    }\n}\n\n// An array of annotation types, so far just signatures, maybe down the line support Number. OpenText etc...\nexport class AnnotationTypes{\n    constructor(){\n        return [\"Sign\"];\n    }\n}\n\nexport class NameStorageMapping {\n    public name?: string; // @todo required, but there is a potential for dups if two people choose the same name, also could fail if they edit user name. small tradoff tho for user usability, until the blockstack registrar is created\n    public userId?: string; // @todo optional, to allow for non registerd users without ID's\n    public email?: string; // optional, for users without user id's\n    public appPublicKey?: string; // optional, the public key for the user for the app via blockstack\n    public pathToStorage: string;\n}\n\n// // Index of documents for searching\n// // blockusign/documents.index.json\n// [\n//     {\n//         \"guid\": \"guid\",\n//         \"fileName\": \"blockusign/nicktee.id/one.pdf\", \n//         \"createdAt\": \"\", \n//         \"updatedAt\": \"\", \n//         \"owner\": [\"nicktee.id\", \"\"], \n//         \"signer\": [\"nicktee.id\"], \n//         \"hasAnnotations\": true,\n//         \"step\": 5,\n//         \"isCompleted\": true\n//     },\n//     {\n//         \"guid\": \"guid\",\n//         \"fileName\": \"blockusign/nicktee.id/two.pdf\", \n//         \"createdAt\": \"\", \n//         \"updatedAt\": \"\", \n//         \"owner\": [\"nicktee.id\", \"\"], \n//         \"signer\": [\"nicktee.id\"], \n//         \"hasAnnotations\": true,\n//         \"step\": 1,\n//         \"isCompleted\": false\n//     }\n// ]\n\n// // documents\n// // blockusign/guid.pdf\n\n// // documents metadata and annotations\n// // blockusign/guid.json\n// {\n//     annotations: \"<img></img><img></img>\"\n// }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/models.ts","import { Component, ViewChild, Input, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef } from '@angular/core';\nimport { NavController, NavParams, IonicPage, Segment, LoadingController } from 'ionic-angular';\nimport { CryptoCompareService } from '../../services/cryptocompare.service'\n//import { HomePage } from '../home/home';\nimport { AbsoluteDragDirective } from '../../directives/absolute-drag/absolute-drag';\nimport { DocumentService } from '../../services/document.service';\nimport 'rxjs/add/operator/retry';\nimport 'rxjs/add/operator/timeout';\nimport 'rxjs/add/operator/delay';\nimport 'rxjs/add/operator/map';\nimport PDFJS from 'pdfjs-dist/build/pdf';\nimport pdfjsLib from 'pdfjs-dist/build/pdf';\nimport PDFAnnotate from 'pdf-annotate';\nimport annotations from './annotations';\nimport mockViewport from './mockViewport'\n//import { SignPage } from '../sign/sign';\n//import { EmailPage } from '../email/email';\nimport { MyApp } from '../../app/app.component';\n\ndeclare let CustomStyle: any;\ndeclare var $: any;\n//const $ = document.querySelectorAll.bind(document);\ndeclare var window: any;\ndeclare let TextLayerBuilder: any;\ndeclare let canvas: any;\ndeclare let scale: any;\ndeclare let rotation: any;\ndeclare var blockstack: any;\ndeclare let Event: any;\ndeclare let dragOn: any;\ndeclare let interact: any;\ndeclare let getQueryParam: any;\n\n\n/**\n * Generated class for the BlockPdfComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'block-pdf',\n  templateUrl: 'block-pdf.html',\n  //changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BlockPdfComponent {\n\n  //@ViewChild(AbsoluteDragDirective) vc: AbsoluteDragDirective;\n  svgDrawer;\n\n  @Input() showToolBar = 0;\n  @Input() showSignature: 0;\n  @Input() showSignHere: 0;\n  @Input() showButtons: 0;\n  @Input() marginTop = '130px';\n\n  public data: any;\n  public DOCUMENT_ID = \"blockusign/pdf1.txt\"; // @TODO not being used, delete in furture\n  public scale: any;\n  public rotation: any;\n  public UI = PDFAnnotate;\n  public page1: any;\n  public page2: any;\n  public tooltype: any;\n  public containerId: string = \"pageContainer1\";\n  public canvasId: string = \"canvas1\";\n  //fileName = \"blockusign/pdf1.pdf\";\n  pdfBuffer: any;\n  selectedElement = null;\n  prevElement = null;\n  currentX = 0;\n  currentY = 0;\n  yourName: string;\n  allowResize = false;\n  loading;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public documentService: DocumentService,\n    private changeDetector: ChangeDetectorRef,\n    private viewContainerRef: ViewContainerRef,\n    public loadingCtrl: LoadingController\n  ) {\n    console.log('====> constructor');\n    \n  }\n\n\n  ngOnInit() {\n    console.log('====> ngOnInit');\n    $( document ).ready( () => {\n\n      this.loading = this.loadingCtrl.create({\n        content: 'Please wait...'\n      });\n      this.loading.present();\n\n      this.init();\n    });\n    \n  }\n\n  ngOnDestroy() {\n    console.log(\"====> ngOnDestroy\");\n\n  }\n\n  init() {\n    //$(\".dropzone\").off();\n    //let pdfData = this.loadPDFData(); // loads pdf data from localStorage, make sure you uploaded it from home.js\n\n    this.svgDrawer  = dragOn(document.querySelector(\".dropzone\"), {\n      listenTo: '.draggable'\n    });\n\n    let docData = getQueryParam('docData');\n    if (docData){\n      this.loading.dismiss();\n      return;\n    }\n\n    if (this.navParams.get(\"guid\") && !this.documentService.currentDoc) {\n      let guid = this.navParams.get(\"guid\");\n      this.documentService.getDocumentsIndex(true).then((data) => {\n        this.documentService.documentsList = data;\n        this.documentService.setCurrentDoc(guid);\n        this.getFile();\n        // @todo in side menu highlight selected doc\n      });\n    }\n    else if (this.documentService.currentDoc.guid) {\n      this.documentService.setCurrentDoc(this.documentService.currentDoc.guid);\n      this.getFile();\n    }\n    else {\n      let guid = this.navParams.get(\"guid\");\n      this.documentService.setCurrentDoc(guid);\n      this.getFile();\n    }\n\n    this.yourName = blockstack.loadUserData().profile.name;\n  }\n\n\n  async getFile() {\n\n    let data = await this.documentService.getDocument(this.documentService.currentDoc.guid + \".pdf\", this.documentService.currentDoc.documentKey);\n    this.pdfBuffer = data;\n\n    let pdfData = new Uint8Array(this.pdfBuffer);\n\n    this.loadPdf(pdfData); // loads the pdf to the screen with the text layers\n\n    //this.setupToolBar();\n\n    //this.page1 = document.querySelector(`#${this.containerId} .annotationLayer`);\n    //this.page2 = document.querySelector('#pageContainer2 .annotationLayer');\n\n    //PDFJS.workerSrc = '//mozilla.github.io/pdf.js/build/pdf.worker.js';\n    //PDFAnnotate.setStoreAdapter(new PDFAnnotate.LocalStoreAdapter());\n\n    // Promise.all([\n    //   PDFAnnotate.getAnnotations(this.DOCUMENT_ID, 1),\n    //   //PDFAnnotate.getAnnotations(this.DOCUMENT_ID, 2)\n    // ]).then(([ann1, ann2]) => {\n\n    //   let RENDER_OPTIONS = {\n    //     documentId: this.DOCUMENT_ID,\n    //     pdfDocument: pdfData,\n    //     scale: 1,\n    //     rotate: 0\n    //   };\n\n    //   PDFAnnotate.render(this.page1, mockViewport(this.page1), ann1);\n    //   //PDFAnnotate.render(this.page2, mockViewport(this.page2), ann2);\n\n    // });\n\n  }\n\n  back() {\n    //this.navCtrl.push(ListPage);\n    //this.navCtrl.push(\"HomePage\");\n    //this.navCtrl.setRoot(HomePage);\n    this.navCtrl.push(\"HomePage\");\n  }\n\n  next() {\n    this.navCtrl.push(\"EmailPage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n  clear() {\n    this.svgDrawer.cleanHTML();\n    this.svgDrawer.cleanDrawArea();\n    this.svgDrawer.updateMetrics();\n    localStorage.removeItem('svg');\n  }\n\n  loadPdf(pdfData) {\n\n    let loadingTask = pdfjsLib.getDocument({ data: pdfData });\n\n    loadingTask.promise.then((pdf) => {\n\n      let pageNumber = 1;\n      pdf.getPage(pageNumber).then((page) => {\n        console.log('Page loaded');\n\n        let scale = 1;\n        let viewport = page.getViewport(scale);\n\n        // Prepare canvas using PDF page dimensions\n        let canvas = document.getElementById('canvas1');\n        let context = (<any>canvas).getContext('2d');\n        (<any>canvas).height = viewport.height;\n        (<any>canvas).width = viewport.width;\n\n\n\n        // Render PDF page into canvas context\n        let renderContext = {\n          canvasContext: context,\n          viewport: viewport\n        };\n        let renderTask = page.render(renderContext)\n          .then(() => {\n\n            // Get text-fragments\n            return page.getTextContent();\n          }).then((textContent) => {\n            // Create div which will hold text-fragments\n            let textLayerDiv = document.createElement(\"div\");\n\n            // Set it's class to textLayer which have required CSS styles\n            textLayerDiv.setAttribute(\"class\", \"textLayer\");\n\n            // Append newly created div in `div#page-#{pdf_page_number}`\n            let div = document.getElementById(`${this.containerId}`);\n            div.appendChild(textLayerDiv);\n\n\n\n            // Create new instance of TextLayerBuilder class\n            let textLayer = new TextLayerBuilder({\n              textLayerDiv: textLayerDiv,\n              pageIndex: page.pageIndex,\n              viewport: viewport\n            });\n\n            // Set text-fragments\n            textLayer.setTextContent(textContent);\n\n\n\n\n            // Render text-fragments\n            textLayer.render();\n\n\n\n            // load svg\n            this.loadSvg(page);\n\n            this.loading.dismiss();\n\n          });\n      });\n\n    }, (reason) => {\n\n      // PDF loading error\n      console.error(reason);\n\n    });\n\n  }\n\n  // loadPDFData() {\n\n  //   let base64pdfData = localStorage.getItem(\"pdfStr\");\n  //   function base64ToUint8Array(base64) {\n  //     let raw = atob(base64);\n  //     let uint8Array = new Uint8Array(new ArrayBuffer(raw.length));\n  //     for (var i = 0, len = raw.length; i < len; ++i) {\n  //       uint8Array[i] = raw.charCodeAt(i);\n  //     }\n  //     return uint8Array;\n  //   }\n  //   return base64ToUint8Array(base64pdfData);\n\n  // }\n\n  // setupAnnotations(page, viewport, canvas, $annotationLayerDiv) {\n\n  //   let canvasOffset = $(canvas).offset();\n  //   let promise = page.getAnnotations().then((annotationsData) => {\n  //     viewport = viewport.clone({\n  //       dontFlip: true\n  //     });\n  //     for (let i = 0; i < annotationsData.length; i++) {\n  //       let data = annotationsData[i];\n  //       let annotation = PDFJS.Annotation.fromData(data);\n  //       if (!annotation || !annotation.hasHtml()) {\n  //         continue;\n  //       }\n  //       let element = annotation.getHtmlElement(page.commonObjs);\n  //       data = annotation.getData();\n  //       let rect = data.rect;\n  //       let view = page.view;\n  //       rect = PDFJS.Util.normalizeRect([\n  //         rect[0],\n  //         view[3] - rect[1] + view[1],\n  //         rect[2],\n  //         view[3] - rect[3] + view[1]\n  //       ]);\n  //       element.style.left = (canvasOffset.left + rect[0]) + 'px';\n  //       element.style.top = (canvasOffset.top + rect[1]) + 'px';\n  //       element.style.position = 'absolute';\n\n  //       let transform = viewport.transform;\n  //       let transformStr = 'matrix(' + transform.join(',') + ')';\n  //       CustomStyle.setProp('transform', element, transformStr);\n  //       let transformOriginStr = -rect[0] + 'px ' + -rect[1] + 'px';\n  //       CustomStyle.setProp('transformOrigin', element, transformOriginStr);\n\n  //       if (data.subtype === 'Link' && !data.url) {\n  //         // In this example,  I do not handle the `Link` annotations without url.\n  //         // If you want to handle those links, see `web/page_view.js`.\n  //         continue;\n  //       }\n  //       $annotationLayerDiv.append(element);\n  //       $annotationLayerDiv.append($(\"#signature\"));\n  //     }\n\n  //   });\n\n  //   return promise;\n\n  // }\n\n  // setActiveToolbarItem(type, button) {\n\n  //   let active = document.querySelector('.toolbar button.active');\n  //   if (active) {\n  //     active.classList.remove('active');\n  //   }\n  //   if (button) {\n  //     button.classList.add('active');\n  //   }\n  //   if (this.tooltype !== type) {\n  //     localStorage.setItem(`${this.DOCUMENT_ID}/tooltype`, type);\n  //   }\n  //   this.tooltype = type;\n  //   this.UI.UI.enableRect(type);\n\n  // }\n\n\n  // handleToolbarClick(e) {\n\n  //   if (e.target.nodeName === 'BUTTON') {\n  //     this.setActiveToolbarItem(e.target.getAttribute('data-tooltype'), e.target);\n  //   }\n\n  // }\n\n  handleClearClick(e) {\n\n    if (confirm('Are you sure you want to throw your work away?')) {\n      //localStorage.removeItem(`${this.DOCUMENT_ID}/annotations`);\n      this.page1.innerHTML = '';\n    }\n\n  }\n\n  // setupToolBar() {\n  //   this.tooltype = localStorage.getItem(`${this.DOCUMENT_ID}/tooltype`) || 'area';\n  //   if (this.tooltype) {\n  //     this.setActiveToolbarItem(this.tooltype, document.querySelector(`.toolbar button[data-tooltype=${this.tooltype}]`));\n  //   }\n\n  // }\n\n  handleDragStart(e) {\n    //log(\"handleDragStart\");\n    e.style.opacity = '0.4'; // this ==> e.target is the source node.\n  };\n\n  // set the overlay dimensionss\n  overLay(page: any) {\n\n    let dimensions = page.pageInfo.view[0] + \" \" + page.pageInfo.view[1] + \" \" + page.pageInfo.view[2] + \" \" + page.pageInfo.view[3];\n    $(\"#svg-dropzone\").css(\"width\", \"612\");\n    $(\"#svg-dropzone\").css(\"height\", \"792\");\n    $(\"#svg-dropzone\").attr(\"width\", \"612\");\n    $(\"#svg-dropzone\").attr(\"height\", \"792\");\n    $(\"#svg-dropzone\").attr(\"viewBox\", dimensions);\n  }\n\n  async saveSvg() {\n    //let svg = $(\".dragOn-drawArea\").last().html();\n\n    let svg = \"\";\n    $(\".dragOn-drawArea\").each(function () {\n      let el = $(this);\n      if (el.html() !== \"\") {\n        svg = svg + el.html();\n      }\n    });\n\n    //if (svg){\n    //localStorage.setItem(\"svg\", svg);\n    await this.documentService.saveAnnotations(this.documentService.currentDoc.guid, svg);\n\n    await this.documentService.addMessage(this.documentService.currentDoc.guid, 'Updated annotation');\n\n    //}\n  }\n\n  async loadSvg(page: any) {\n    //let innerHtml = localStorage.getItem(\"svg\");\n\n    // overlay\n    this.overLay(page);\n\n    let json = await this.documentService.getAnnotations(this.documentService.currentDoc.guid);\n    let innerHtml = null;\n    if (json) {\n      innerHtml = json.annotations;\n    }\n\n    if (innerHtml) {\n      this.svgDrawer.addHTML(innerHtml);\n    }\n\n    //this.changeDetector.markForCheck();\n\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/block-pdf/block-pdf.ts","import { NgModule } from '@angular/core';\nimport { AbsoluteDragDirective } from './absolute-drag/absolute-drag';\n@NgModule({\n\tdeclarations: [AbsoluteDragDirective],\n\timports: [],\n\texports: [AbsoluteDragDirective]\n})\nexport class DirectivesModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives/directives.module.ts","import { Injectable } from '@angular/core';\nimport { Document, Log, Message } from './../models/models';\nimport 'rxjs/add/operator/toPromise';\nimport { Http, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { AnonymousSubject } from 'rxjs/Subject';\nimport { Events } from 'ionic-angular';\nimport * as moment from 'moment';\nimport * as Automerge from 'automerge/dist/automerge.js';\nimport { BlockStackService } from './blockstack.service';\ndeclare let jslinq: any;\n//const Automerge = require('automerge');\ndeclare let blockstack: any;\ndeclare let sjcl: any;\ndeclare let $: any;\n\nimport { State } from './../models/state';\nimport { of } from 'rxjs/observable/of';\n\n/*\n  Generated class for the StorageServiceProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class DocumentService {\n\n  private indexFileName = \"blockusign/documents.index.json\";\n  public documentsList: Array<Document>;\n  public docBuffer: any;\n  public currentDoc: Document;\n  public currentDocAnnotationsDoc;\n  public currentDocAnnotations;\n  public logDoc: any;\n  public log: Log;\n  //public automerge = Automerge;\n\n  constructor(\n    public events: Events, \n    private http: Http,\n    private blockStackService: BlockStackService\n  ) {\n    console.log('Hello StorageServiceProvider Provider');\n    this.documentsList = [];\n\n    // @TODO - think about putting in checks here is documentsList is empty, \n    // or there could be a async race issue if they take too long to come back\n    this.getDocumentsIndex(true).then((data) => {\n      this.documentsList = data;\n    });\n  }\n\n  async getDocumentsIndex(refresh: boolean) {\n    if (refresh) {\n      let resp = await blockstack.getFile(this.indexFileName, { decrypt: true });\n      if (resp) {\n        this.documentsList = JSON.parse(resp);\n      }\n      if (this.documentsList == null || !resp) {\n        this.documentsList = JSON.parse(await blockstack.putFile(this.indexFileName, \"[]\", { encrypt: true }));\n      }\n    }\n    return this.documentsList;\n  }\n\n\n  async addDocument(fileName: string, fileBuffer: any) {\n    let newDocument = new Document();\n    newDocument.fileName = fileName;\n    newDocument.documentKey = this.generateKey();\n    newDocument.pathAnnotatedDoc = blockstack.loadUserData().profile.apps[window.location.origin];\n    let profileData = await this.blockStackService.getProfileData();\n    let myEmail = null;\n    if (profileData){\n      myEmail = JSON.parse(profileData).email;\n    }\n    newDocument.paths = [{\n      name: blockstack.loadUserData().profile.name, \n      userId: blockstack.loadUserData().username, \n      email: myEmail,\n      appPublicKey: await this.blockStackService.getAppPublicKey(),\n      pathToStorage: blockstack.loadUserData().profile.apps[window.location.origin]\n    }];\n    newDocument.signer = [];\n    this.documentsList.push(newDocument);\n    await blockstack.putFile(this.indexFileName, JSON.stringify(this.documentsList), { encrypt: true });\n    this.docBuffer = fileBuffer;\n    this.currentDoc = newDocument;\n    let response = await this.addDocumentBytes(newDocument.guid, fileBuffer, newDocument.documentKey);\n    return this.documentsList;\n  }\n\n  async updateDocument(documentGuid, doc){\n    // find in array \n    let index = this.documentsList.findIndex(i => i.guid === documentGuid);\n    // update\n    if (index !== -1) {\n      this.documentsList[index] = doc;\n      // write document index\n      await blockstack.putFile(this.indexFileName, JSON.stringify(this.documentsList), { encrypt: true });\n      return true;\n    }\n    return false;\n  }\n\n \n\n  async removeDocument(document) {\n    // remove item\n    this.documentsList = (<any>this.documentsList).remove(document);\n    await blockstack.putFile(this.indexFileName, JSON.stringify(this.documentsList), { encrypt: true });\n    await this.removeDocumentBytes(document.guid);\n    // remove binary file\n    return this.documentsList;\n  }\n\n  async addDocumentBytes(guid: string, doc: any, documentKey: string) {\n    let encryptedDoc = this.ecryptDoc(doc, documentKey);\n    // add blank annotations file\n    await this.createAnnotations(guid);\n    // add blank log file\n    await this.getLog(guid);\n    return blockstack.putFile(guid + \".pdf\", encryptedDoc, { encrypt: false }).then((data) => { });\n  }\n\n  async getDocument(fileName: string, documentKey: string) {\n    let resp = await blockstack.getFile(fileName, { decrypt: false });\n    if (resp) {\n      let encryptedDoc = resp;\n      return this.decryptDoc(encryptedDoc, documentKey);\n    }\n    else {\n      return null;\n    }\n  }\n\n  async getDocumentByPath(docPath: string, docKey: string) {\n    let resp = await this.http.get(docPath).toPromise();\n    if (resp) {\n      let encryptedDoc = resp.text();\n      return this.decryptDoc(encryptedDoc, docKey);\n    }\n    else {\n      return of(null);\n    }\n  }\n\n  async copyDocument(newDocument: Document, guid: string, fileBuffer: any) {\n    console.log(\"file buffer\", fileBuffer);\n    console.log(\"guid\", guid);\n    console.log(\"doc\", newDocument);\n\n    let myName = null;\n    if (blockstack.loadUserData().profile.name){\n      myName = blockstack.loadUserData().profile.name;\n    }\n    let myUserId = null;\n    if(blockstack.loadUserData().username){\n      myUserId = blockstack.loadUserData().username;\n    }\n    let profileData = await this.blockStackService.getProfileData();\n    let myEmail = null;\n    if (profileData){\n      myEmail = JSON.parse(profileData).email;\n    }\n    \n    newDocument.paths.push({\n      name: myName, \n      userId: myUserId, \n      email: myEmail,\n      appPublicKey: await this.blockStackService.getAppPublicKey(),\n      pathToStorage: blockstack.loadUserData().profile.apps[window.location.origin]\n    });\n\n    this.documentsList.push(newDocument);\n    console.log(\"new doc list\", this.documentsList );\n    await blockstack.putFile(this.indexFileName, JSON.stringify(this.documentsList), { encrypt: true });\n    this.currentDoc = newDocument;\n    //let response = await this.addDocumentBytes(guid, fileBuffer, newDocument.documentKey);\n    this.docBuffer = fileBuffer;\n    let encryptedDoc = this.ecryptDoc(fileBuffer, this.currentDoc.documentKey);\n    let r = await blockstack.putFile(guid + \".pdf\", encryptedDoc, { encrypt: false }).then((data) => { });\n\n    // @todo now copy annotations\n    let annotsResp = await this.getAnnotationsByPath(this.currentDoc.pathAnnotatedDoc + guid + \".annotations.json\", this.currentDoc.documentKey);\n    if (annotsResp) {\n      this.saveAnnotations(guid, this.currentDocAnnotations.annotations);\n    }\n    else{\n      this.saveAnnotations(guid, \"\");\n    }\n    \n\n    // @todo now copy chat log\n    let theirPath = jslinq(this.currentDoc.paths).where( (el) => el.email != this.blockStackService.profile.email  ).toList();\n    let theirUrl = theirPath[0].pathToStorage + guid + '.log.json';\n    let theirLogDoc = await this.getLogByPath(theirUrl, this.currentDoc.documentKey);\n    if (theirLogDoc) {\n      let logStr = Automerge.save(theirLogDoc);\n      await this.saveLog(guid, logStr);\n    }\n    else{\n      // nothing\n    }\n\n    return this.documentsList;\n  }\n\n  documentExists(guid): boolean {\n    let exists = false;\n    let docs = jslinq(this.documentsList).where(  (el) => el.guid == guid ).toList();\n    if (docs.length > 0){\n      exists = true;\n    }\n    return exists;\n  }\n\n  async addSignerToCurrentDoc(nameOrId){\n\n    \n    \n  }\n\n  async removeDocumentBytes(guid: string) {\n    await blockstack.putFile(guid + \".annotations.json\", \"\", { encrypt: false });\n    await blockstack.putFile(guid + \".log.json\", \"\", { encrypt: false });\n    return blockstack.putFile(guid + \".pdf\", \"\", { encrypt: false }).then((data) => { });\n  }\n\n\n  async createAnnotations(guid: string) {\n    let json = {\n      annotations: \"\"\n    }\n    this.currentDocAnnotationsDoc = Automerge.init();\n    let commit = blockstack.loadUserData().profile.name + \" created annotations on \" + this.getDate(); \n    this.currentDocAnnotationsDoc = Automerge.change(this.currentDocAnnotationsDoc, commit, doc => {\n      doc.annots = [];\n    });\n    let saveAnnotStr = Automerge.save(this.currentDocAnnotationsDoc);\n    let encrypted = this.encryptString(saveAnnotStr, this.currentDoc.documentKey);\n    return await blockstack.putFile(guid + \".annotations.json\", encrypted, { encrypt: false });\n  }\n\n  async saveAnnotations(guid: string, annotation: string) {\n    let json = {\n      annotations: annotation\n    }\n    let commit = blockstack.loadUserData().profile.name + \" added annotation on \" + this.getDate(); \n    this.currentDocAnnotationsDoc = Automerge.change(this.currentDocAnnotationsDoc, commit, doc => {\n      doc.annots.insertAt(0, json);\n    });\n    let saveAnnotStr = Automerge.save(this.currentDocAnnotationsDoc);\n    let encrypted = this.encryptString(saveAnnotStr, this.currentDoc.documentKey);\n    return await blockstack.putFile(guid + \".annotations.json\", encrypted, { encrypt: false });\n  }\n\n  async getAnnotations(guid: string) {\n    let resp = await blockstack.getFile(guid + \".annotations.json\", { decrypt: false });\n    if (resp) {\n      let decrypted = this.decryptString(resp, this.currentDoc.documentKey);\n      this.currentDocAnnotationsDoc = Automerge.load(decrypted);\n      this.currentDocAnnotations =  this.currentDocAnnotationsDoc.annots[0];//JSON.parse(decrypted);\n    }\n    if (!resp) {\n      this.currentDocAnnotations = \"\";\n    }\n\n   \n\n    return this.currentDocAnnotations;\n  }\n\n  async getAnnotationsByPath(docPath: string, docKey: string): Promise<any> {\n    // @todo WIP\n    let resp = await this.http.get(docPath).toPromise();\n    if (resp) {\n      let encryptedDocStr = JSON.stringify(resp.json());\n      let annotations = this.decryptString(encryptedDocStr, docKey);\n      this.currentDocAnnotationsDoc = Automerge.load(annotations);\n      this.currentDocAnnotations =  this.currentDocAnnotationsDoc.annots[0];\n      //this.currentDocAnnotations = JSON.parse(annotations);\n    }\n    if (!resp) {\n      this.currentDocAnnotations = \"\";\n    }\n    return this.currentDocAnnotations;\n  }\n\n  async mergeAnnotations(guid, theirs?, mine?){\n    if (!theirs){\n      theirs = await this.getAnnotationsByPath(this.currentDoc.pathAnnotatedDoc + guid + \".annotations.json\", this.currentDoc.documentKey);\n      theirs = this.currentDocAnnotationsDoc;\n    }\n    if (!mine){\n      mine =  await this.getAnnotations(guid);\n      mine = this.currentDocAnnotationsDoc;\n    }\n    \n   \n    let mergedAnnotations = Automerge.merge(mine, theirs);\n\n    console.log(\"mergedAnnots\", mergedAnnotations);\n\n  }\n\n  setCurrentDoc(guid: string) {\n    //alert('set curr doc');\n    this.currentDoc = this.documentsList.find(x => x.guid == guid);\n    this.events.publish('documentService:setCurrentDoc', this.currentDoc);\n    let span = \"span:contains('\" + this.currentDoc.fileName + \"')\";\n    $(document).ready(function () {\n      $(\".channels-list-text li\").removeClass('active');\n      let s = $(span);\n      s.parent().addClass('active');\n    });\n  }\n\n\n  //#region Log (Chat)\n  async getLog(guid: string) {\n    let logFileName = guid + '.log.json';\n    let resp;\n    try {\n      resp = await blockstack.getFile(logFileName, { decrypt: false }); \n      // existing doc\n      if (resp) {\n          this.logDoc = this.decryptString(resp, this.currentDoc.documentKey);\n          this.logDoc =  Automerge.load(this.logDoc);\n          // now get their doc, if there is a signer\n          if (this.currentDoc.paths.length > 1){\n            this.log = this.logDoc.log;\n            \n            let theirPath = jslinq(this.currentDoc.paths).where( (el) => el.email != this.blockStackService.profile.email  ).toList();\n\n            //let theirUrl = this.currentDoc.paths.find( x=> x.userId == this.currentDoc.signer[0] || x.name == this.currentDoc.signer[0]  );\n            let theirUrl = theirPath[0].pathToStorage\n            if (theirUrl){\n              let url = theirUrl + logFileName;\n              let theirResp = await this.http.get(url).toPromise(); \n              // now merge their doc into mine\n              if (theirResp){\n                let str = theirResp.text();\n                str = this.decryptString(str, this.currentDoc.documentKey);\n                let theirDoc = Automerge.load(str);\n                let finalDoc = Automerge.merge(theirDoc, this.logDoc)\n                this.logDoc = finalDoc;\n              }\n            }\n          }\n          this.log = this.logDoc.log;\n      }\n      // init new doc\n      else {\n        let newLog = new Log();\n        newLog.messages = [];\n        let msg = new Message();\n        msg.createdBy = blockstack.loadUserData().username;\n        msg.createdByName = blockstack.loadUserData().profile.name;\n        msg.email = this.blockStackService.profile.email;\n        msg.message = \"Created Doc\";\n        newLog.messages.push(msg);\n        this.logDoc = Automerge.init();\n        this.logDoc = Automerge.change(this.logDoc, 'Initialize log - ' + this.getDate(), doc => {\n          doc.log = newLog;\n        });\n        let logStr = Automerge.save(this.logDoc);\n        logStr = this.encryptString(logStr, this.currentDoc.documentKey)\n        logStr = await blockstack.putFile(logFileName, logStr, { encrypt: false });\n        logStr = this.decryptString(logStr, this.currentDoc.documentKey);\n        console.log('logstr', logStr);\n        this.logDoc = Automerge.load(logStr);\n        this.log = this.logDoc.log;\n        //this.log = JSON.parse(await blockstack.putFile(logFileName, JSON.stringify(newLog), { encrypt: false }));\n      }\n      return this.log;\n    }\n    catch (e) {\n      //throw e;\n    }\n  }\n\n  async saveLog(guid: string, logStr: string) {\n    let logFileName = guid + '.log.json';\n    logStr = this.encryptString(logStr, this.currentDoc.documentKey)\n    logStr = await blockstack.putFile(logFileName, logStr, { encrypt: false });\n  }\n\n  async getLogByPath(docPath, docKey){\n     let resp = await this.http.get(docPath).toPromise();\n     if (resp) {\n       let encryptedDocStr = JSON.stringify(resp.json());\n       let chatLog = this.decryptString(encryptedDocStr, docKey);\n       this.logDoc = Automerge.load(chatLog);\n       this.log =  this.logDoc.log;\n     }\n     if (!resp) {\n       this.log = null;\n     }\n    return this.logDoc;\n  }\n\n  async addMessage(guid: string, message: string) {\n    let logFileName = guid + \".log.json\"\n    let log = await this.getLog(guid);\n    if (log) {\n      let msg = new Message();\n      msg.message = message;\n      msg.createdBy = blockstack.loadUserData().username;\n      msg.createdByName = blockstack.loadUserData().profile.name;\n      msg.email = this.blockStackService.profile.email;\n      this.logDoc = Automerge.change(this.logDoc, msg.createdByName + \" added message at \" + this.getDate() ,  (doc) => {\n        doc.log.messages.push(msg);\n      });\n      //log.messages.push(msg);\n      let logStr = Automerge.save(this.logDoc);\n      logStr = this.encryptString(logStr, this.currentDoc.documentKey);\n      await blockstack.putFile(logFileName, logStr, { encrypt: false });\n      this.log = this.logDoc.log;\n      this.events.publish('documentService:addedChat', msg);\n      return this.log;\n      //return await blockstack.putFile(logFileName, JSON.stringify(log), { encrypt: false });\n    }\n    else {\n      console.error(\"error getting log file: \" + logFileName)\n    }\n  }\n  //#endregion\n\n\n  async updatePartnerPathData(){\n    \n  }\n\n\n  //#region Encryption\n  //https://stackoverflow.com/questions/26734033/encrypting-files-with-sjcl-client-side\n  ecryptDoc(doc: any, key: string) {\n    let docBits = sjcl.codec.arrayBuffer.toBits(doc);\n    let base64bits = sjcl.codec.base64.fromBits(docBits);\n    let encryptedDoc = sjcl.encrypt(key, base64bits);\n    return encryptedDoc;\n  }\n  decryptDoc(encryptedDoc, key: string) {\n    let dec = sjcl.decrypt(key, encryptedDoc);\n    let decryptedBase64 = sjcl.codec.base64.toBits(dec);\n    let decryptedDocBits = sjcl.codec.arrayBuffer.fromBits(decryptedBase64);\n    return decryptedDocBits;\n  }\n  encryptString(payload:string, key: string) {\n    let encryptedDoc = sjcl.encrypt(key, payload);\n    return encryptedDoc;\n  }\n  decryptString(payload: string, key: string) {\n    let dec = sjcl.decrypt(key, payload);\n    return dec;\n  }\n  generateKey() {\n    return (<any>window).guid();\n  }\n  //#endregion\n\n\n\n  // watchout\n  async resetStorage() {\n    await blockstack.putFile(this.indexFileName, \"[]\", { encrypt: true });\n  }\n\n\n  testAutoMerge() {\n\n    // // fetch from server state for Nick\n    // let doc1Nick = [{ 'who': 'nick' }];\n\n    // // init doc\n    // let doc1 = Automerge.init();\n    // let commitMsg = 'Initialize doc from server for nick - ' + this.getDate();\n    // doc1 = Automerge.change(doc1, commitMsg , doc => {\n    //   doc = doc1Nick;\n    // });\n\n    // console.log(doc1);\n\n    // // nick adds a row\n    // commitMsg = 'Nick adds a row - ' + this.getDate;\n    // doc1 = Automerge.change(doc1, 'Add card', doc => {\n    //   doc.push({'who': 'nick2'});\n    // });\n\n    // console.log(doc1);\n\n\n    // // Now let's simulate another device, whose application state is doc2. We\n    // // initialise it separately, and merge doc1 into it. After merging, doc2 has\n    // // a copy of all the cards in doc1.\n    // // fetch from server state for Blockusign\n\n    // let doc1Blockusign1 = [{ 'who': 'nick' }, {'who': 'Blocusign1'}];\n\n  }\n\n  getDate() {\n    let d = Date();\n    return d;\n  }\n\n\n\n\n  doc;\n  docMine;\n  docYours;\n  state = new State();\n\n  testInitDoc() {\n\n    // 1) init or load Mine\n    this.docMine = this.state.docInit();\n   \n    // 2) Save as string\n    let docStr = this.state.docSave(this.docMine);\n    \n    // 3) Send to server\n    // putFile\n\n    return docStr;\n    \n  }\n\n  testEditDoc(){\n    // 1) load Mine\n    //this.docMine;\n\n    // 2) Edit Doc\n    this.docMine = this.state.docEdit(this.docMine, \"nick 1st add - \" + this.getDate(), \"messages\", {'nick': '1'} );\n\n\n    // 3) Save to server\n    \n  }\n\n  testMerge(){\n\n    // 1) load Mine\n    let docMine = this.testInitDoc();\n    \n    // 2) get Their data data\n\n    // 3) Merge\n\n    // 4) Save\n    \n\n    // return doc\n\n\n  }\n\n  \n\n\n  getMine(property, message){\n     // init doc\n     let docMine = Automerge.init();\n     //let commitMsg = 'initDoc - ' + this.getDate();\n     docMine = Automerge.change(docMine, message , doc => {\n        \n        doc[property] = [message];\n     });\n     return docMine;\n  }\n\n  // save2Mine(docMine, message){\n  //   docMine = Automerge.change(docMine, message, doc => {\n  //     doc.chat.push(message);\n  //   });\n  //   return docMine;\n  // }\n\n  // mergeYours(){\n  //   this.docYours = Automerge.init()\n  //   this.docYours = Automerge.merge(this.docYours, this.docMine);\n\n  //   this.docYours = Automerge.change(this.docYours, 'save2Yours - ' + this.getDate() , doc => {\n\n  //     let msg = new Message();\n  //     msg.message = \"yours 3\";\n  //     msg.createdBy = blockstack.loadUserData().username;\n  //     msg.createdByName = blockstack.loadUserData().profile.name;\n  //     doc.chat.push(msg);\n\n  //   });\n\n  //   console.log(this.docYours);\n  //   return this.docYours;\n  // }\n\n\n  // save4Mine(){\n  //   this.docMine = Automerge.change(this.docMine, 'save3Me - ' + this.getDate(), doc => {\n\n  //     let msg = new Message();\n  //     msg.message = \"me 4\";\n  //     msg.createdBy = blockstack.loadUserData().username;\n  //     msg.createdByName = blockstack.loadUserData().profile.name;\n  //     doc.chat.push(msg);\n\n  //   });\n  //   return this.docMine;\n  // }\n\n  // sync(){\n  //   this.doc = Automerge.merge(this.docMine, this.docYours);\n  //   console.log(this.doc);\n\n  //   // sort by date\n  //   console.log(\n  //     jslinq(this.doc.chat).orderBy( (el) => el.updatedAt ).toList()\n  //   ); \n\n  //   return this.doc;\n  // }\n\n  // genMessage(content){\n  //   let msg = new Message();\n  //   msg.message = content;\n  //   msg.createdBy = blockstack.loadUserData().username;\n  //   msg.createdByName = blockstack.loadUserData().profile.name;\n  //   return msg;\n  // }\n\n\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/document.service.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EmailPage } from './email';\nimport { BlockStepsComponentModule } from '../../components/components.module';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [\n    EmailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EmailPage),\n    BlockStepsComponentModule,\n    NgSelectModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  providers: [\n    \n  ]\n})\nexport class EmailPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email/email.module.ts","import { Injectable } from '@angular/core';\nimport { Document } from './../models/models';\nimport 'rxjs/add/operator/toPromise';\nimport { Http, Response, Headers, RequestOptionsArgs, RequestOptions } from '@angular/http';\nimport { HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { AnonymousSubject } from 'rxjs/Subject';\nimport { Events } from 'ionic-angular';\ndeclare let blockstack: any;\n\n/*\n  Generated class for the StorageServiceProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class EmailService {\n\n  //url = \"https://api.sendgrid.com/v3/mail/send\";\n  //apiK = \"\";\n  url = \"https://blockusign.co/api/email\";\n  //url = \"http://localhost:5000/api/email\";\n\n\n  constructor(public events: Events, public http: Http) {\n\n  }\n\n  async sendEmail (to, subject, content) {\n\n    if (!to || !subject || !content){\n      alert('Must add an email address');\n      return;\n    }\n\n    let data = {\n      \"to\": to, \n      \"subject\": subject, \n      \"content\": content\n    };\n    let httpOptions = new RequestOptions();\n    httpOptions.headers = new Headers(\n      {\n        'Content-Type': 'application/json'\n      }\n    );\n\n    let resp = await this.http.post(this.url, JSON.stringify(data), httpOptions).toPromise();\n    return resp;\n\n  }\n  \n  catchError () {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/email.service.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReviewPage } from './review';\nimport { BlockStepsComponentModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    ReviewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReviewPage),\n    BlockStepsComponentModule\n  ],\n})\nexport class ReviewPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/review/review.module.ts","import { IonicPageModule, IonicModule } from \"ionic-angular\";\nimport { HomePage } from \"./home\";\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from \"@angular/core\";\nimport { BlockStepsComponentModule } from '../../components/components.module';\n//import { BlockStepsComponent } from '../../components/block-steps/block-steps';\n\n@NgModule({\n    declarations: [\n      HomePage,\n      //BlockStepsComponent\n    ],\n    imports: [\n      IonicPageModule.forChild(HomePage),\n      BlockStepsComponentModule\n    ],\n    entryComponents: [\n        HomePage\n    ],\n    schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\n  })\n  export class HomeModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { NavController, IonicPage } from 'ionic-angular';\nimport { Chart } from 'chart.js';\nimport { AnnotatePage } from '../annotate/annotate';\nimport moment from 'moment-timezone';\nimport 'rxjs/add/operator/toPromise';\nimport { LoadingController } from 'ionic-angular';\nimport { prototype } from 'long';\nimport __pdfjs from 'pdfjs-dist/build/pdf';\nimport PDFJSAnnotate from 'pdf-annotate';\nimport { GlobalService } from '../../services/global.service';\nimport { DocumentService } from '../../services/document.service';\nimport { AlertController } from 'ionic-angular';\ndeclare let window: any;\ndeclare let PDFView: any;\ndeclare let canvas: any;\ndeclare let TextEncoder: any;\ndeclare let FileReader: any;\ndeclare let blockstack: any;\ndeclare let document: any;\ndeclare let jsPDF: any;\ndeclare let $: any;\ndeclare let sjcl: any;\n\n//const $ = document.querySelectorAll.bind(document);\n\n/// Pdf js basic example - https://jsfiddle.net/pdfjs/cq0asLqz/?utm_source=website&utm_medium=embed&utm_campaign=cq0asLqz\n/// Annotations sample - http://jsfiddle.net/seikichi/RuDvz/2/\n\n@IonicPage()\n@Component({\n    selector: 'page-home',\n    templateUrl: 'home.html'\n})\nexport class HomePage {\n\n    name: string;\n    isLoggedIn = false;\n    loginState = \"Login\";\n    fileName = \"blockusign/pdf1.pdf\";\n    profile: any;\n    pdfBuffer: any;\n    canvasCamera: any;\n    cameraContext: any;\n    loading;\n\n    constructor(\n        public navCtrl: NavController, \n        public loadingCtrl: LoadingController,\n        public globalService: GlobalService, \n        public documentService: DocumentService, \n        public alertCtrl: AlertController\n    ) {\n\n    }\n\n    async ionViewDidLoad() {\n\n        //this.initCamera();\n        this.ekUpload();\n\n        //let docs = await this.documentService.getDocumentsIndex(true)\n        //this.testPublicKeyFile();\n    }\n\n    next() {\n\n        //this.navCtrl.push(AnnotatePage)\n        //this.navCtrl.setRoot(ListPage);\n        this.navCtrl.push(\"AnnotatePage\", {\n            guid: this.documentService.currentDoc.guid\n        });\n    }\n\n    async saveFile(fileName) {\n\n\n        let documentList = await this.documentService.addDocument(fileName, this.pdfBuffer);\n        this.next();\n\n        // blockstack.putFile(fileName, this.pdfBuffer, { encrypt: true }).then((data) => {\n        //     this.next();\n        // });\n    }\n\n    async getFile() {\n        let data = this.documentService.getDocument(this.fileName, this.documentService.currentDoc.documentKey);\n        this.pdfBuffer = data;\n    }\n\n    loadFile() {\n\n        this.loading = this.loadingCtrl.create({\n            content: 'Please wait...'\n          });\n        //this.loading.present();\n\n        let fileInput: any = document.getElementById('file-upload');\n        let firstFile = fileInput.files[0];\n\n        let startByte = 0;\n        let endByte = firstFile.size;\n        let opt_startByte = startByte.toString();\n        let opt_stopByte = endByte.toString();\n        let files = (<any>document).getElementById('file-upload').files;\n        if (!files.length) {\n            alert('Please select a file!');\n            return;\n        }\n        let file = files[0];\n        let start = parseInt(opt_startByte) || 0;\n        let stop = parseInt(opt_stopByte) || file.size - 1;\n        let filename = \"\";\n        let reader = new FileReader();\n        // If we use onloadend, we need to check the readyState.\n        reader.onloadend = (evt: any) => {\n            if (evt.target.readyState == FileReader.DONE) {\n                // document.getElementById('byte_content').textContent = evt.target.result;\n                // document.getElementById('byte_range').textContent =\n                //     ['Read bytes: ', start + 1, ' - ', stop + 1,\n                //         ' of ', file.size, ' byte file'].join('');\n            }\n            filename = fileInput.files[0].name;\n            this.newDocModal(filename);\n            //localStorage.setItem(\"FileName\", filename);\n        };\n\n        let blob = file.slice(start, stop + 1);\n        //reader.readAsBinaryString(blob);\n        reader.onload = (evt: any) => {\n            let arraybuffer = evt.target.result;\n            this.pdfBuffer = arraybuffer;\n            //this.saveFile();\n            let pdfData = new Uint8Array(arraybuffer);\n            //this.savePdfAsString(pdfData);\n            this.createPdf(pdfData);\n        };\n        reader.readAsArrayBuffer(blob);\n    }\n\n    createPdf(pdfData) {\n        // Loaded via <script> tag, create shortcut to access PDF.js exports.\n        let pdfjsLib = window['pdfjs-dist/build/pdf'];\n\n        pdfjsLib.workerSrc = '//mozilla.github.io/pdf.js/build/pdf.worker.js';\n        PDFJSAnnotate.setStoreAdapter(new PDFJSAnnotate.LocalStoreAdapter());\n\n        let loadingTask = pdfjsLib.getDocument({ data: pdfData });\n\n        loadingTask.promise.then((pdf) => {\n            console.log('PDF loaded');\n            let pageNumber = 1;\n            pdf.getPage(pageNumber).then((page) => {\n                console.log('Page loaded');\n                let scale = 1.5;\n                let viewport = page.getViewport(scale);\n\n                // Prepare canvas using PDF page dimensions\n                let canvas: any = document.getElementById('the-canvas');\n                let context = canvas.getContext('2d');\n                canvas.height = viewport.height;\n                canvas.width = viewport.width;\n\n                // Render PDF page into canvas context\n                let renderContext = {\n                    canvasContext: context,\n                    viewport: viewport\n                };\n                let renderTask = page.render(renderContext);\n                renderTask.then(() => {\n                    console.log('Page rendered');\n                    this.loading.dismiss();\n                });\n            });\n\n        }, (reason) => {\n            // PDF loading error\n            console.error(reason);\n            this.loading.dismiss();\n        });\n    }\n\n    savePdfAsString(pdf) {\n        this.largeuint8ArrToString(pdf, (strPdf) => {\n            let base64StringPdf = btoa(strPdf);\n            //localStorage.setItem(\"pdfStr\", base64StringPdf);\n        });\n    }\n\n    getPdfFromString(base64PdfString) {\n        // decode base64 string, remove space for IE compatibility\n        let binary = atob(base64PdfString.replace(/\\s/g, ''));\n        let len = binary.length;\n        let arraybuffer = new ArrayBuffer(len);\n        let pdfData = new Uint8Array(arraybuffer);\n    }\n\n    largeuint8ArrToString(uint8arr, callback) {\n        let bb = new Blob([uint8arr]);\n        let f = new FileReader();\n        f.onload = (e: any) => {\n            callback(e.target.result);\n        };\n        f.readAsBinaryString(bb);\n    }\n\n    // File Upload https://codepen.io/mattsince87/pen/yadZXv?editors=0010#0\n    ekUpload() {\n        let self = this;\n        function Init() {\n\n            console.log(\"Upload Initialised\");\n\n            var fileSelect = document.getElementById('file-upload'),\n                fileDrag = document.getElementById('file-drag'),\n                submitButton = document.getElementById('submit-button');\n\n            fileSelect.addEventListener('change', fileSelectHandler, false);\n\n            // Is XHR2 available?\n            var xhr = new XMLHttpRequest();\n            if (xhr.upload) {\n                // File Drop\n                fileDrag.addEventListener('dragover', fileDragHover, false);\n                fileDrag.addEventListener('dragleave', fileDragHover, false);\n                fileDrag.addEventListener('drop', fileSelectHandler, false);\n            }\n        }\n\n        function fileDragHover(e) {\n            var fileDrag = document.getElementById('file-drag');\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            fileDrag.className = (e.type === 'dragover' ? 'hover' : 'modal-body file-upload');\n        }\n\n        function fileSelectHandler(e) {\n            // Fetch FileList object\n            var files = e.target.files || e.dataTransfer.files;\n\n            // Cancel event and hover styling\n            fileDragHover(e);\n\n\n            // Process all File objects\n            for (var i = 0, f; f = files[i]; i++) {\n                // parseFile(f);\n                self.loadFile();\n                uploadFile(f);\n\n            }\n        }\n\n        // Output\n        function output(msg) {\n            // Response\n            var m = document.getElementById('messages');\n            m.innerHTML = msg;\n        }\n\n\n        function setProgressMaxValue(e) {\n            var pBar = document.getElementById('file-progress');\n\n            if (e.lengthComputable) {\n                pBar.max = e.total;\n            }\n        }\n\n        function updateFileProgress(e) {\n            var pBar = document.getElementById('file-progress');\n\n            if (e.lengthComputable) {\n                pBar.value = e.loaded;\n            }\n        }\n\n        function uploadFile(file) {\n\n            var xhr = new XMLHttpRequest(),\n                fileInput = document.getElementById('class-roster-file'),\n                pBar = document.getElementById('file-progress'),\n                fileSizeLimit = 2048; // In MB\n            if (xhr.upload) {\n                // Check if file is less than x MB\n                if (file.size <= fileSizeLimit * 1024 * 1024) {\n                    // Progress bar\n                    pBar.style.display = 'inline';\n                    xhr.upload.addEventListener('loadstart', setProgressMaxValue, false);\n                    xhr.upload.addEventListener('progress', updateFileProgress, false);\n\n                    // File received / failed\n                    xhr.onreadystatechange = function (e) {\n                        if (xhr.readyState == 4) {\n                            // Everything is good!\n\n                            // progress.className = (xhr.status == 200 ? \"success\" : \"failure\");\n                            // document.location.reload(true);\n                        }\n                    };\n\n                    // Start upload\n                    xhr.open('POST', document.getElementById('file-upload-form').action, true);\n                    xhr.setRequestHeader('X-File-Name', file.name);\n                    xhr.setRequestHeader('X-File-Size', file.size);\n                    xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n                    xhr.send(file);\n                } else {\n                    output('Please upload a smaller file (< ' + fileSizeLimit + ' MB).');\n                }\n            }\n        }\n\n        // Check for the various File API support.\n        if (window.File && window.FileList && window.FileReader) {\n            Init();\n        } else {\n            document.getElementById('file-drag').style.display = 'none';\n        }\n    }\n\n\n\n    newDocModal(fileName) {\n\n        let alert = this.alertCtrl.create({\n            title: 'Document Name',\n            inputs: [\n                {\n                    name: 'fileName',\n                    placeholder: '',\n                    value: fileName\n                }\n            ],\n            buttons: [\n                {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    handler: data => {\n                        console.log('Cancel clicked');\n                    }\n                },\n                {\n                    text: 'Ok',\n                    handler: data => {\n\n                        // save here\n\n                        this.saveFile(data.fileName);\n\n                        if (true == true) {\n                            // logged in!\n                        } else {\n                            // invalid login\n                            return false;\n                        }\n                    }\n                }\n            ]\n        });\n        alert.present();\n    }\n\n\n    async initCamera() {\n\n        // rear camera selection - https://github.com/webrtc/samples/blob/gh-pages/src/content/devices/input-output/js/main.js\n        // https://www.html5rocks.com/en/tutorials/getusermedia/intro/\n        // @todo check rear camera logic on all phones\n        let devices = await navigator.mediaDevices.enumerateDevices();;\n\n        // find back camera\n        var rearCamera = devices.find((device) => { return (device.kind === 'videoinput' && device.label.includes('back')) });\n        let mediaOptions: any;\n\n        if (rearCamera) {\n            mediaOptions = {\n                deviceId: { exact: rearCamera.deviceId }\n            };\n        }\n        else {\n            mediaOptions = true;\n        }\n\n\n        let mediaConfig = {\n            video: mediaOptions\n        };\n\n        let playStream = function (video, src) {\n            video.src = src;\n            video.play();\n        };\n\n        // let process = (video) => {\n        //     let mediaDevices = navigator.mediaDevices;\n        //     mediaDevices.getUserMedia(mediaConfig).then(\n        //         stream => playStream(\n        //             video,\n        //             window.URL.createObjectURL(stream)\n        //         )\n        //     ).catch(function (err) {\n        //         // alert(err);\n        //         alert(\"Not support get stream from camera!\");\n        //     });\n        // };\n\n        let process = (video) => {\n            let mediaDevices = navigator.mediaDevices;\n            mediaDevices.getUserMedia(mediaConfig).then(function (stream) {\n                var videoTracks = stream.getVideoTracks();\n                console.log('Got stream with constraints:', mediaConfig);\n                console.log('Using video device: ' + videoTracks[0].label);\n                // stream.onended = function() {\n                //   console.log('Stream ended');\n                // };\n                window.stream = stream; // make variable available to console\n                video.srcObject = stream;\n            }).catch(function (err) {\n                // alert(err);\n                alert(\"Not support get stream from camera!\");\n            });\n        };\n\n\n\n        let video = $(\"#video\")[0];\n        process(video);\n\n        this.canvasCamera = $(\"#canvasCamera\")[0];\n        this.cameraContext = this.canvasCamera.getContext(\"2d\");\n\n        $(\"#snap\").on('click', () => {\n            this.cameraContext.drawImage(video, 0, 0, 612, 792);\n        });\n\n        $(\"#downloadpdf\").on('click', this.savePDF);\n\n    }\n\n    savePDF() {\n        try {\n            this.canvasCamera = $(\"#canvasCamera\")[0];\n            var imgData = this.canvasCamera.toDataURL(\"image/jpeg\", 1.0);\n            var pdf = new jsPDF('p', 'mm', [297, 210]);\n            pdf.addImage(imgData, 'JPEG', 5, 5);\n            var namefile = prompt(\"insert name of file\");\n            pdf.save(namefile + \".pdf\");\n        } catch (e) {\n            alert(\"Error description: \" + e.message);\n        }\n\n    }\n\n\n    testPublicKeyFile() {\n        const myPublicKey = blockstack.getPublicKeyFromPrivate(blockstack.loadUserData().appPrivateKey);\n        const yourPublicKey = \"02563f0f1d5c5429fa8fdb3d8fc4b0464dac70b07cd8249f0ef17bcf2c93ed7469\";\n\n        if (blockstack.loadUserData().profile.name == \"nick tee\") {\n\n            // write for you\n            this.testPutFile(yourPublicKey);\n            // write for me\n            this.testPutFile(myPublicKey).then(() => {\n                // read for me\n                this.testGetFile(myPublicKey);\n            });\n        }\n\n        if (blockstack.loadUserData().profile.name == \"Demo User BlockSign\") {\n            // read for me\n            this.testGetFile(myPublicKey);\n        }\n\n\n\n    }\n\n\n    testPutFile(publicKey): Promise<any> {\n        const encryptOptions = { encrypt: publicKey };\n        const path = \"testFile.json\";\n        let fileContent = \"{stuff: 'from nicktee.id'}\";\n\n        // put and encrypt the file\n        return blockstack.putFile(path, fileContent, encryptOptions)\n            .then((publicURL) => {\n                console.log(\"testPublicKeyFile ===> \" + publicURL);\n            });\n    }\n\n    testGetFile(publicKey): Promise<any> {\n        const decryptOptions = {\n            decrypt: true\n        };\n        let fullReadUrl = \"../../hub/18kTskBpTh1mznsypu1fhJ27dxbC1SwXEK/testFile.json\";\n\n        return blockstack.getFile(fullReadUrl, decryptOptions).then(readContent => {\n            console.log(\"testPublicKeyFile ===> \" + readContent);\n        });\n    }\n\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class GlobalService {\n\n\n    public GaiUrl: string;\n\n    constructor() { \n\n        this.GaiUrl = \"http://21312\";\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/global.service.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignPage } from './sign';\nimport { BlockStepsComponentModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    SignPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignPage),\n    BlockStepsComponentModule\n  ],\n})\nexport class SignPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sign/sign.module.ts","import { Component } from \"@angular/core\";\nimport { ViewController } from \"ionic-angular\";\nimport { DocumentService } from './../services/document.service';\nimport { ToastController } from 'ionic-angular';\n\n@Component({\n    template: `\n     <br/>\n      <ion-list style=\"\">\n        <button ion-item (click)=\"documentRemove()\">Delete</button>\n        <button ion-item (click)=\"close()\">CLOSE X</button>\n      </ion-list>\n    `\n  })\n  export class OptionsPopoverPage {\n    \n    doc: any;\n\n    constructor(public viewCtrl: ViewController, public documentService: DocumentService, private toastCtrl: ToastController) {\n        this.doc = this.viewCtrl.data.selectedDoc;\n\n    }\n  \n    close() {\n      this.viewCtrl.dismiss();\n    }\n\n    async documentRemove(selectedDocument){\n        await this.documentService.removeDocument( this.doc );\n        let toast = this.toastCtrl.create({\n            message: 'Document deleted!',\n            duration: 3000,\n            position: 'middle'\n          });\n        toast.present();\n        \n        this.viewCtrl.dismiss();\n    }\n\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/app/options.popover.page.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule} from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule, IonicPageModule, List, NavController } from 'ionic-angular';\nimport { HttpModule, JsonpModule } from '@angular/http';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { ChartsModule } from 'ng2-charts';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { FormsModule } from '@angular/forms';\n\nimport { MyApp } from './app.component';\nimport { OptionsPopoverPage } from './options.popover.page';\nimport { DirectivesModule } from './../directives/directives.module';\nimport { HomeModule } from '../pages/home/home.module';\nimport { AnnotatePageModule } from '../pages/annotate/annotate.module';\nimport { SignPageModule } from '../pages/sign/sign.module';\nimport { EmailPageModule } from '../pages/email/email.module';\nimport { ReviewPageModule } from '../pages/review/review.module';\nimport { BlockStepsComponentModule } from './../components/components.module';\n\n\n//import { HomePage } from './../pages/home/home';\n//import { AnnotatePage } from './../pages/annotate/annotate';\n\nimport { CoinService } from '../services/coin.service';\nimport { GlobalService } from '../services/global.service'\nimport { CryptoCompareService } from '../services/cryptocompare.service';\nimport { SlackService } from '../services/slack.service';\nimport { DocumentService } from '../services/document.service';\nimport { EmailService } from '../services/email.service';\nimport { BlockStackService } from '../services/blockstack.service';\nimport { Block } from 'bitcoinjs-lib';\n\n\n\n@NgModule({\n  declarations: [\n    MyApp,\n    OptionsPopoverPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp, {\n      preloadModules: true\n    }),\n    DirectivesModule,\n    ChartsModule,\n    HttpModule,\n    JsonpModule,\n    HomeModule,\n    AnnotatePageModule,\n    SignPageModule,\n    EmailPageModule,\n    ReviewPageModule,\n    NgSelectModule, \n    FormsModule,\n    BlockStepsComponentModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    OptionsPopoverPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    BlockStackService,\n    CoinService,\n    CryptoCompareService,\n    SlackService,\n    GlobalService,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    DocumentService,\n    EmailService\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import * as Automerge from 'automerge/dist/automerge.js';\n\nexport class State {\n\n\n    // 1) Init\n    docInit() {\n        // init doc\n        let docMine = Automerge.init();\n        return docMine;\n    }\n    // 1) Or Get Mine\n    docLoadMine(mine) {\n        return Automerge.load(mine);\n    }\n\n    // 2) Get Theirs\n    docLoadTheirs(theirs) {\n        return Automerge.load(theirs);\n    }\n\n    // 3) Merge theirs into mine, and sort by updatedAt date\n    docMerge(mine, theirs) {\n        return Automerge.merge(mine, theirs);\n    }\n\n    // 4) Save the merged state\n    docSave(doc) {\n        return Automerge.save(doc);\n    }\n\n    // 5) Add my changes\n    docEdit(mine, commit, property, data) {\n        mine = Automerge.change(mine, commit, doc => {\n            doc[property] = data;\n        });\n        return mine;\n    }\n\n    docHistory(doc){\n        return Automerge.getHistory(doc).map(state => [state.change.message, state.snapshot.cards.length])\n    }\n\n    constructor() {\n\n    }\n\n}\n\n//let state = new State();\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/state.ts","import { Component, Input } from '@angular/core';\nimport { NavController, IonicPage } from 'ionic-angular';\nimport { DocumentService } from '../../services/document.service';\ndeclare let $: any;\n\n/**\n * Generated class for the BlockStepsComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'block-steps',\n  templateUrl: 'block-steps.html'\n})\nexport class BlockStepsComponent {\n\n\n  @Input() activeStep;\n\n  text: string;\n\n  constructor(private nav: NavController, private documentService: DocumentService) {\n    console.log('Hello BlockStepsComponent Component');\n    this.text = 'Hello World';\n  }\n\n  route(page){\n    // try{\n    //   this.nav.pop();\n    // }\n    // catch(e) {\n    //   // nothing to pop\n    // };\n    $('.block-pdf-page').empty();\n    this.nav.push(page, {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/block-steps/block-steps.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 574\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 593\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// http (ignored)\n// module id = 594\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// https (ignored)\n// module id = 595\n// module chunks = 1","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { BlockStepsComponent } from './block-steps/block-steps';\nimport { IonicModule } from 'ionic-angular';\nimport { BlockPdfComponent } from './block-pdf/block-pdf';\nimport { DirectivesModule } from '../directives/directives.module';\nimport { BlockChatComponent } from './block-chat/block-chat';\n\n@NgModule({\n    declarations: [BlockStepsComponent,\n        BlockPdfComponent,\n    BlockChatComponent],\n    imports: [\n        IonicModule,\n        DirectivesModule\n    ],\n    exports: [BlockStepsComponent,\n        BlockPdfComponent,\n    BlockChatComponent]\n})\nexport class BlockStepsComponentModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: BlockStepsComponentModule,\n            providers: []\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Directive, Input, ElementRef, Renderer, Output } from '@angular/core';\nimport { DomController } from 'ionic-angular';\ndeclare let dragOn: any;\ndeclare let interact: any;\ndeclare let $: any;\n\n/**\n * Generated class for the AbsoluteDragDirective directive.\n *\n * See https://angular.io/api/core/Directive for more info on Angular\n * Directives.\n */\n@Directive({\n  selector: '[absolute-drag]' // Attribute selector\n})\nexport class AbsoluteDragDirective {\n\n\n  @Input('startLeft') startLeft: any;\n  @Input('startTop') startTop: any;\n  public svgDrawer : any;\n\n  constructor(public element: ElementRef, public renderer: Renderer, public domCtrl: DomController) {\n  \n  }\n\n  ngAfterViewInit() {\n \n\n    this.initDragOn();\n\n    // this.renderer.setElementStyle(this.element.nativeElement, 'position', 'absolute');\n    // this.renderer.setElementStyle(this.element.nativeElement, 'left', this.startLeft + 'px');\n    // this.renderer.setElementStyle(this.element.nativeElement, 'top', this.startTop + 'px');\n\n    //let hammer = new window['Hammer'](this.element.nativeElement);\n    // hammer.get('pan').set({ direction: window['Hammer'].DIRECTION_ALL });\n\n    // hammer.on('pan', (ev) => {\n    //   this.handlePan(ev);\n     \n    // });\n\n}\n\nngOnDestroy(){\n  //this.svgDrawer.off();\n  //this.svgDrawer.remove();\n  //$(this.svgDrawer.elem).remove();\n  this.startLeft = null;\n  this.startTop = null;\n}\n\n// handlePan(ev){\n\n//     let newLeft = ev.center.x;\n//     let newTop = ev.center.y;\n\n//     this.domCtrl.write(() => {\n//         this.renderer.setElementStyle(this.element.nativeElement, 'left', newLeft + 'px');\n//         this.renderer.setElementStyle(this.element.nativeElement, 'top', newTop + 'px');\n//     });\n\n// }\n\ninitDragOn() {\n\n  try{\n    this.svgDrawer  = dragOn(document.querySelector(\".dropzone\"), {\n      listenTo: '.draggable'\n    });\n\n   \n  }\n  catch(e){}\n  \n\n\n  // target elements with the \"resizable\" class\n  // interact('.resizable')\n  //   .resizable({\n  //     // preserveAspectRatio: true,\n  //     edges: {\n  //       left: true,\n  //       right: true,\n  //       bottom: true,\n  //       top: true\n  //     }\n  //   })\n  //   .on('resizemove', (event) => {\n\n  //     svgDrawer.updateMetrics();\n\n  //     var target = event.target,\n  //       x = (parseFloat(target.getAttribute('data-x')) || 0),\n  //       y = (parseFloat(target.getAttribute('data-y')) || 0);\n\n  //     // update the element's style\n  //     target.style.width = event.rect.width + 'px';\n  //     target.style.height = event.rect.height + 'px';\n\n  //     // translate when resizing from top or left edges\n  //     x += event.deltaRect.left;\n  //     y += event.deltaRect.top;\n\n  //     target.style.webkitTransform = target.style.transform =\n  //       'translate(' + x + 'px,' + y + 'px)';\n\n  //     target.setAttribute('data-x', x);\n  //     target.setAttribute('data-y', y);\n  //   });\n\n\n\n\n\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives/absolute-drag/absolute-drag.ts","import { Component, Input } from '@angular/core';\nimport { Observable } from 'rxjs/Rx';\nimport { DocumentService } from './../../services/document.service';\nimport { Document, Log, Message } from './../../models/models';\nimport { Events } from 'ionic-angular';\nimport { BlockStackService } from '../../services/blockstack.service';\nimport * as moment from 'moment';\ndeclare let $: any;\ndeclare let jslinq: any;\n\n/**\n * https://codepen.io/mehmetmert/pen/zbKpv\n */\n@Component({\n  selector: 'block-chat',\n  templateUrl: 'block-chat.html',\n})\nexport class BlockChatComponent {\n\n  public doc: Document;\n  public message;\n  public subscription;\n  public chatSubscription;\n \n  constructor(\n    public documentService: DocumentService, \n    public events: Events,\n    public blockstackService: BlockStackService\n  ) {\n  \n  }\n\n  ngOnInit(){\n    \n   \n    this.doc = new Document();\n    \n    if (this.documentService.currentDoc){\n      this.doc = this.documentService.currentDoc;\n      this.getLogData();\n    }\n    else{\n      this.subscription = this.events.subscribe('documentService:setCurrentDoc', async (currentDoc) => {\n        this.doc = currentDoc;\n        this.getLogData();\n      });\n    }\n\n    this.chatSubscription = this.events.subscribe('documentService:addedChat', async (msg) => {\n\n      setTimeout( () =>{ // hack?\n        this.getLogData();\n      }, 1000 );\n\n      \n    });\n    \n\n  }\n\n  ngOnDestroy(){\n    if (this.subscription){\n      this.subscription.unsubscribe();\n    }\n\n    if (this.chatSubscription){\n      this.chatSubscription.unsubscribe();\n    }\n  }\n\n  async getLogData(){\n\n\n    $(document).ready(async ()=>{\n      let logData: Log = await this.documentService.getLog(this.doc.guid);\n\n      $('.chat-head').html(this.doc.fileName);\n     \n      let template = \"\";\n\n      let orderedMessages = jslinq(logData.messages).orderBy( (el) => el.updatedAt ).toList();\n\n      for (let item of orderedMessages ) {\n  \n        let d = item.updatedAt;\n        let formatDate = moment(d).calendar(d);\n  \n        let uid = item.createdBy;\n        try{\n          uid = item.createdBy.replace('.id','');\n        }\n        catch(e){ console.log('user does not have .id') };\n        \n        let uName = item.createdByName;\n        let uidClass = 'block-pic-' + uid;\n  \n        this.blockstackService.getPicUrl(uName).then( (picUrl) =>{\n          $('.' + uidClass).attr('src', picUrl);\n        });\n  \n        template =  template + `  \n        <div class=\"chat-message clearfix\">\n        <img class=\"${uidClass}\" src=\"http://www.gravatar.com/avatar/?d=identicon\" alt=\"\" width=\"32\" height=\"32\">\n        <div class=\"chat-message-content clearfix\">\n          <span class=\"chat-time\">${formatDate}</span>\n          <h5>${item.email}</h5>\n          <p>${item.message}</p>\n        </div> \n        </div>\n        <hr style='margin-top:5px' />\n        `;\n      }\n\n\n      //setTimeout( () =>{ // hack?\n        $('.log-history').html(template);\n        $('.chat-history').scrollTop($('.log-history').height());\n     // }, 300 );\n\n     \n    });\n\n    \n  }\n\n  minimize(){\n    $('.chat').slideToggle(300, 'swing');\n    $('.chat-message-counter').fadeToggle(300, 'swing');\n  }\n\n  async addMessage(){\n    await this.documentService.addMessage(this.doc.guid, this.message);\n    this.events.publish('documentService:addedChat', this.message);\n    this.message = null;\n\n    // @todo optimize this with lazy load adding of new message\n    //await this.getLogData();\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/block-chat/block-chat.ts","var map = {\n\t\"./af\": 270,\n\t\"./af.js\": 270,\n\t\"./ar\": 271,\n\t\"./ar-dz\": 272,\n\t\"./ar-dz.js\": 272,\n\t\"./ar-kw\": 273,\n\t\"./ar-kw.js\": 273,\n\t\"./ar-ly\": 274,\n\t\"./ar-ly.js\": 274,\n\t\"./ar-ma\": 275,\n\t\"./ar-ma.js\": 275,\n\t\"./ar-sa\": 276,\n\t\"./ar-sa.js\": 276,\n\t\"./ar-tn\": 277,\n\t\"./ar-tn.js\": 277,\n\t\"./ar.js\": 271,\n\t\"./az\": 278,\n\t\"./az.js\": 278,\n\t\"./be\": 279,\n\t\"./be.js\": 279,\n\t\"./bg\": 280,\n\t\"./bg.js\": 280,\n\t\"./bm\": 281,\n\t\"./bm.js\": 281,\n\t\"./bn\": 282,\n\t\"./bn.js\": 282,\n\t\"./bo\": 283,\n\t\"./bo.js\": 283,\n\t\"./br\": 284,\n\t\"./br.js\": 284,\n\t\"./bs\": 285,\n\t\"./bs.js\": 285,\n\t\"./ca\": 286,\n\t\"./ca.js\": 286,\n\t\"./cs\": 287,\n\t\"./cs.js\": 287,\n\t\"./cv\": 288,\n\t\"./cv.js\": 288,\n\t\"./cy\": 289,\n\t\"./cy.js\": 289,\n\t\"./da\": 290,\n\t\"./da.js\": 290,\n\t\"./de\": 291,\n\t\"./de-at\": 292,\n\t\"./de-at.js\": 292,\n\t\"./de-ch\": 293,\n\t\"./de-ch.js\": 293,\n\t\"./de.js\": 291,\n\t\"./dv\": 294,\n\t\"./dv.js\": 294,\n\t\"./el\": 295,\n\t\"./el.js\": 295,\n\t\"./en-au\": 296,\n\t\"./en-au.js\": 296,\n\t\"./en-ca\": 297,\n\t\"./en-ca.js\": 297,\n\t\"./en-gb\": 298,\n\t\"./en-gb.js\": 298,\n\t\"./en-ie\": 299,\n\t\"./en-ie.js\": 299,\n\t\"./en-il\": 300,\n\t\"./en-il.js\": 300,\n\t\"./en-nz\": 301,\n\t\"./en-nz.js\": 301,\n\t\"./eo\": 302,\n\t\"./eo.js\": 302,\n\t\"./es\": 303,\n\t\"./es-do\": 304,\n\t\"./es-do.js\": 304,\n\t\"./es-us\": 305,\n\t\"./es-us.js\": 305,\n\t\"./es.js\": 303,\n\t\"./et\": 306,\n\t\"./et.js\": 306,\n\t\"./eu\": 307,\n\t\"./eu.js\": 307,\n\t\"./fa\": 308,\n\t\"./fa.js\": 308,\n\t\"./fi\": 309,\n\t\"./fi.js\": 309,\n\t\"./fo\": 310,\n\t\"./fo.js\": 310,\n\t\"./fr\": 311,\n\t\"./fr-ca\": 312,\n\t\"./fr-ca.js\": 312,\n\t\"./fr-ch\": 313,\n\t\"./fr-ch.js\": 313,\n\t\"./fr.js\": 311,\n\t\"./fy\": 314,\n\t\"./fy.js\": 314,\n\t\"./gd\": 315,\n\t\"./gd.js\": 315,\n\t\"./gl\": 316,\n\t\"./gl.js\": 316,\n\t\"./gom-latn\": 317,\n\t\"./gom-latn.js\": 317,\n\t\"./gu\": 318,\n\t\"./gu.js\": 318,\n\t\"./he\": 319,\n\t\"./he.js\": 319,\n\t\"./hi\": 320,\n\t\"./hi.js\": 320,\n\t\"./hr\": 321,\n\t\"./hr.js\": 321,\n\t\"./hu\": 322,\n\t\"./hu.js\": 322,\n\t\"./hy-am\": 323,\n\t\"./hy-am.js\": 323,\n\t\"./id\": 324,\n\t\"./id.js\": 324,\n\t\"./is\": 325,\n\t\"./is.js\": 325,\n\t\"./it\": 326,\n\t\"./it.js\": 326,\n\t\"./ja\": 327,\n\t\"./ja.js\": 327,\n\t\"./jv\": 328,\n\t\"./jv.js\": 328,\n\t\"./ka\": 329,\n\t\"./ka.js\": 329,\n\t\"./kk\": 330,\n\t\"./kk.js\": 330,\n\t\"./km\": 331,\n\t\"./km.js\": 331,\n\t\"./kn\": 332,\n\t\"./kn.js\": 332,\n\t\"./ko\": 333,\n\t\"./ko.js\": 333,\n\t\"./ky\": 334,\n\t\"./ky.js\": 334,\n\t\"./lb\": 335,\n\t\"./lb.js\": 335,\n\t\"./lo\": 336,\n\t\"./lo.js\": 336,\n\t\"./lt\": 337,\n\t\"./lt.js\": 337,\n\t\"./lv\": 338,\n\t\"./lv.js\": 338,\n\t\"./me\": 339,\n\t\"./me.js\": 339,\n\t\"./mi\": 340,\n\t\"./mi.js\": 340,\n\t\"./mk\": 341,\n\t\"./mk.js\": 341,\n\t\"./ml\": 342,\n\t\"./ml.js\": 342,\n\t\"./mn\": 343,\n\t\"./mn.js\": 343,\n\t\"./mr\": 344,\n\t\"./mr.js\": 344,\n\t\"./ms\": 345,\n\t\"./ms-my\": 346,\n\t\"./ms-my.js\": 346,\n\t\"./ms.js\": 345,\n\t\"./mt\": 347,\n\t\"./mt.js\": 347,\n\t\"./my\": 348,\n\t\"./my.js\": 348,\n\t\"./nb\": 349,\n\t\"./nb.js\": 349,\n\t\"./ne\": 350,\n\t\"./ne.js\": 350,\n\t\"./nl\": 351,\n\t\"./nl-be\": 352,\n\t\"./nl-be.js\": 352,\n\t\"./nl.js\": 351,\n\t\"./nn\": 353,\n\t\"./nn.js\": 353,\n\t\"./pa-in\": 354,\n\t\"./pa-in.js\": 354,\n\t\"./pl\": 355,\n\t\"./pl.js\": 355,\n\t\"./pt\": 356,\n\t\"./pt-br\": 357,\n\t\"./pt-br.js\": 357,\n\t\"./pt.js\": 356,\n\t\"./ro\": 358,\n\t\"./ro.js\": 358,\n\t\"./ru\": 359,\n\t\"./ru.js\": 359,\n\t\"./sd\": 360,\n\t\"./sd.js\": 360,\n\t\"./se\": 361,\n\t\"./se.js\": 361,\n\t\"./si\": 362,\n\t\"./si.js\": 362,\n\t\"./sk\": 363,\n\t\"./sk.js\": 363,\n\t\"./sl\": 364,\n\t\"./sl.js\": 364,\n\t\"./sq\": 365,\n\t\"./sq.js\": 365,\n\t\"./sr\": 366,\n\t\"./sr-cyrl\": 367,\n\t\"./sr-cyrl.js\": 367,\n\t\"./sr.js\": 366,\n\t\"./ss\": 368,\n\t\"./ss.js\": 368,\n\t\"./sv\": 369,\n\t\"./sv.js\": 369,\n\t\"./sw\": 370,\n\t\"./sw.js\": 370,\n\t\"./ta\": 371,\n\t\"./ta.js\": 371,\n\t\"./te\": 372,\n\t\"./te.js\": 372,\n\t\"./tet\": 373,\n\t\"./tet.js\": 373,\n\t\"./tg\": 374,\n\t\"./tg.js\": 374,\n\t\"./th\": 375,\n\t\"./th.js\": 375,\n\t\"./tl-ph\": 376,\n\t\"./tl-ph.js\": 376,\n\t\"./tlh\": 377,\n\t\"./tlh.js\": 377,\n\t\"./tr\": 378,\n\t\"./tr.js\": 378,\n\t\"./tzl\": 379,\n\t\"./tzl.js\": 379,\n\t\"./tzm\": 380,\n\t\"./tzm-latn\": 381,\n\t\"./tzm-latn.js\": 381,\n\t\"./tzm.js\": 380,\n\t\"./ug-cn\": 382,\n\t\"./ug-cn.js\": 382,\n\t\"./uk\": 383,\n\t\"./uk.js\": 383,\n\t\"./ur\": 384,\n\t\"./ur.js\": 384,\n\t\"./uz\": 385,\n\t\"./uz-latn\": 386,\n\t\"./uz-latn.js\": 386,\n\t\"./uz.js\": 385,\n\t\"./vi\": 387,\n\t\"./vi.js\": 387,\n\t\"./x-pseudo\": 388,\n\t\"./x-pseudo.js\": 388,\n\t\"./yo\": 389,\n\t\"./yo.js\": 389,\n\t\"./zh-cn\": 390,\n\t\"./zh-cn.js\": 390,\n\t\"./zh-hk\": 391,\n\t\"./zh-hk.js\": 391,\n\t\"./zh-tw\": 392,\n\t\"./zh-tw.js\": 392\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 625;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 625\n// module chunks = 1","import { Component, ChangeDetectionStrategy, ViewEncapsulation, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { DocumentService } from './../../services/document.service';\nimport { EmailService } from './../../services/email.service';\nimport { BlockStackService } from './../../services/blockstack.service';\nimport { Observable } from 'rxjs';\nimport { delay, map, tap, distinctUntilChanged, debounceTime, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/observable/of';\nimport { Subject } from 'rxjs';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { LoadingController } from 'ionic-angular';\ndeclare let blockstack: any;\n\n/**\n * Generated class for the SignPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'EmailPage',\n  segment: 'email/:guid',\n  defaultHistory: ['AnnotatePage', 'HomePage'],\n})\n@Component({\n  selector: 'page-email',\n  templateUrl: 'email.html',\n  changeDetection: ChangeDetectionStrategy.Default,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class EmailPage {\n\n  email = \"\";\n  lookupId: string;\n  user: string;\n  people3: any = [];\n  people3Loading = false;\n  selectedUser = [];\n  people3Typeahead = new Subject<string>();\n  loading;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public documentService: DocumentService,\n    public emailService: EmailService,\n    public blockStackService: BlockStackService,\n    public chg: ChangeDetectorRef,\n    public loadingCtrl: LoadingController\n  ) {\n\n    if (this.navParams.get(\"guid\") && !this.documentService.currentDoc) {\n      let guid = this.navParams.get(\"guid\");\n      this.documentService.getDocumentsIndex(true).then((data) => {\n        this.documentService.documentsList = data;\n        this.documentService.setCurrentDoc(guid);\n        //this.getFile();\n        // @todo in side menu highlight selected doc\n      });\n    }\n    else {\n      //this.getFile();\n    }\n\n  }\n\n  async ionViewDidLoad() {\n    console.log('ionViewDidLoad SignPage');\n    this.lookup();\n    this.loadPeople3();\n  }\n\n  next() {\n    this.navCtrl.push(\"SignPage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n  back() {\n    this.navCtrl.push(\"AnnotatePage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n  getUrl() {\n    return window.location.href;\n  }\n\n  lookup() {\n    blockstack.lookupProfile(\"blockusign1.id\")\n      .then((profile) => {\n        let data = profile;\n      })\n      .catch((error) => {\n        console.log('could not resolve profile')\n      })\n  }\n\n  async searchUser(user) {\n    let resp = await this.blockStackService.searchUser(user);\n  }\n\n  private loadPeople3() {\n    this.people3Typeahead.pipe(\n      tap( () => this.people3Loading = true),\n      distinctUntilChanged(),\n      debounceTime(375),\n      switchMap(term => \n        this.blockStackService.searchUser(term)\n      ),\n    ).subscribe(x => {\n      this.people3 = x;\n      this.people3Loading = false;\n      //this.chg.markForCheck();\n      console.log(\"ppl loading false\");\n    }, () => {\n      this.people3 = [];\n      console.log(\"[]\");\n    });\n  }\n\n  async sendEmail(e){\n    if (!this.email){\n      alert('Please enter an email address');\n      return;\n    }\n\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n    this.loading.present();\n\n    let documentLink = window.location.origin + \"/#/sign/\" + this.documentService.currentDoc.guid + \"/?docData=\" + btoa(JSON.stringify(this.documentService.currentDoc));\n    let subject = blockstack.loadUserData().profile.name + \" has sent you a document to sign - \" + this.documentService.currentDoc.fileName;\n    let content = \"Please click this link and sign the document. Thanks! <br/><br/>\" + documentLink;\n    await this.emailService.sendEmail(this.email, subject, content);\n\n    // add as signer\n    this.documentService.currentDoc.signer.push(this.email);    \n    await this.documentService.updateDocument(this.documentService.currentDoc.guid, this.documentService.currentDoc)\n\n    this.loading.dismiss();\n\n    alert('Email sent!');\n  }\n\n  clickedUser(){\n    // @todo spoofed\n    setTimeout( ()=>{\n      alert('Email not found. Please enter below');\n    }, 1000 );\n  }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email/email.ts","import { Injectable } from '@angular/core';\nimport { Document, Log, Message } from './../models/models';\nimport 'rxjs/add/operator/toPromise';\nimport { Http, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { AnonymousSubject } from 'rxjs/Subject';\nimport { Events } from 'ionic-angular';\nimport { map } from 'rxjs/operators';\nimport { of } from 'rxjs/observable/of';\nimport { delay } from 'rxjs/operator/delay';\nimport { Headers, RequestOptionsArgs, RequestOptions } from '@angular/http';\nimport { HttpHeaders } from '@angular/common/http';\ndeclare let blockstack: any;\n\n@Injectable()\nexport class BlockStackService {\n\n  public picCache = [];\n  public blockusignProfileUrl = \"blockusign.profile.json\";\n  public profile;\n  //url = \"https://blockusign.co/api/email\";\n  url = \"http://localhost:5000/api/profile\";\n\n \n  constructor(\n    public events: Events,\n    public http: Http\n  ) {\n\n  }\n\n  async searchUser(user) {\n    // get from server\n    let resp = await this.http.get(\"https://core.blockstack.org/v1/search?query=\" + user).map(r => r.json().results).toPromise();\n    return resp;\n  }\n\n  async getPicUrl(userId) {\n\n    // placeholder\n    let picUrl = \"http://www.gravatar.com/avatar/?d=identicon\";\n    try {\n      if (!userId) {\n        return picUrl;\n      }\n\n      // get from cache\n      let isInCache = this.picCache.filter(item => item.id === userId)[0];\n      if (isInCache) {\n        return this.picCache.filter(item => item.id === userId)[0].pic;\n      }\n\n      // get from server\n      let resp = await this.http.get(\"https://core.blockstack.org/v1/search?query=\" + userId).toPromise();\n      let respObj = JSON.parse(resp.text());\n      if (respObj.results.length > 0) {\n        picUrl = respObj.results[0].profile.image[0].contentUrl\n      }\n      this.picCache.push({\n        id: userId,\n        pic: picUrl\n      });\n    }\n    catch (e) {\n      console.log('Unable to getpic url')\n\n    }\n\n    return picUrl;\n\n  }\n\n\n  async getProfileData() {\n  \n    // this.clearProfileData();\n  \n    let profileData = await blockstack.getFile(this.blockusignProfileUrl, { decrypt: false });\n\n    let myProfile = JSON.parse(profileData);\n    if (myProfile) {\n      this.profile = myProfile\n    }\n\n    return profileData;\n  }\n\n  async setProfileData(email) {\n    \n    let storagePath = blockstack.loadUserData().profile.apps[window.location.origin];\n    let json = {\n      email: email,\n      storagePath: storagePath,\n      appPublicKey: await this.getAppPublicKey()\n    }\n    return await blockstack.putFile(this.blockusignProfileUrl, JSON.stringify(json), { encrypt: false });\n  }\n\n  async clearProfileData() {\n    \n    let json = {\n    \n    }\n    return await blockstack.putFile(this.blockusignProfileUrl, JSON.stringify(json), { encrypt: false });\n  }\n\n  async getAppPublicKey(){\n    var myPublicKey  = await blockstack.getPublicKeyFromPrivate(blockstack.loadUserData().appPrivateKey);\n    return myPublicKey;\n  }\n\n  async writeGlobalProfile(){\n    let httpOptions = new RequestOptions();\n    httpOptions.headers = new Headers(\n      {\n        'Content-Type': 'application/json'\n      }\n    );\n    return await this.http.post(\"url\", JSON.stringify(this.profile), httpOptions)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/blockstack.service.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { DocumentService } from './../../services/document.service';\n\n/**\n * Generated class for the SignPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'ReviewPage',\n  segment: 'review/:guid',\n  defaultHistory: ['SignPage', 'EmailPage','AnnotatePage', 'HomePage']\n})\n@Component({\n  selector: 'page-review',\n  templateUrl: 'review.html',\n})\nexport class ReviewPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public documentService: DocumentService) {\n\n    if ( this.navParams.get(\"guid\") && !this.documentService.currentDoc ){\n      let guid = this.navParams.get(\"guid\");\n      this.documentService.getDocumentsIndex(true).then((data) => {\n        this.documentService.documentsList = data;\n        this.documentService.setCurrentDoc(guid);\n        //this.getFile();\n        // @todo in side menu highlight selected doc\n      });\n    }\n    else{\n      //this.getFile();\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SignPage');\n  }\n\n \n\n  back(){\n    this.navCtrl.push(\"SignPage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/review/review.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { DocumentService } from './../../services/document.service';\nimport { BlockPdfComponent } from '../../components/block-pdf/block-pdf';\ndeclare let blockstack: any;\ndeclare let getQueryParam: any;\ndeclare let jslinq: any;\n\n/**\n * Generated class for the SignPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'SignPage',\n  segment: 'sign/:guid',\n  defaultHistory: ['EmailPage', 'AnnotatePage', 'HomePage']\n})\n@Component({\n  selector: 'page-sign',\n  templateUrl: 'sign.html',\n})\nexport class SignPage {\n\n  name: string;\n  @ViewChild(BlockPdfComponent) blockPdf: BlockPdfComponent;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public documentService: DocumentService\n  ) {\n\n  }\n\n  ionViewDidLoad() {\n    this.init();\n  }\n\n  async init() {\n    \n    // if you are a signer and the document is not in your document.index then add it!\n    // @todo think about allowing a document to get signed by an anonymous person if they got it via email with the documentKey\n\n    // test - http://localhost:8100/#/sign/a48b11c6-349b-697b-90f9-8356c29ccbf8/?docData=eyJndWlkIjoiYTQ4YjExYzYtMzQ5Yi02OTdiLTkwZjktODM1NmMyOWNjYmY4IiwiY3JlYXRlZEF0IjoxNTI3MTI3NTgxNDgyLCJ1cGRhdGVkQXQiOjE1MjcxMjc1ODE0ODIsImhhc0Fubm90YXRpb25zIjpmYWxzZSwic3RlcCI6IkFubm90YXRlIiwiaXNDb21wbGV0ZWQiOmZhbHNlLCJmaWxlTmFtZSI6Im5pY2sgMS5wZGYiLCJkb2N1bWVudEtleSI6IjVjYmY0NjVjLTU5ODktOTNlMy02OGUxLTdkNTE5NzEyYTZmNCIsInBhdGhBbm5vdGF0ZWREb2MiOiJodHRwczovL2dhaWEuYmxvY2tzdGFjay5vcmcvaHViLzE4a1Rza0JwVGgxbXpuc3lwdTFmaEoyN2R4YkMxU3dYRUsvIiwicGF0aHMiOlt7Im5hbWUiOiJuaWNrIHRlZSIsInVzZXJJZCI6Im5pY2t0ZWUuaWQiLCJwYXRoVG9TdG9yYWdlIjoiaHR0cHM6Ly9nYWlhLmJsb2Nrc3RhY2sub3JnL2h1Yi8xOGtUc2tCcFRoMW16bnN5cHUxZmhKMjdkeGJDMVN3WEVLLyJ9XSwic2lnbmVyIjpbImJsb2NrdXNpZ24uaWQiXX0=\n\n    let docData = getQueryParam('docData');\n   \n    // my doc\n    if (this.navParams.get(\"guid\") && !this.documentService.currentDoc && !docData) {\n      let guid = this.navParams.get(\"guid\");\n      this.documentService.getDocumentsIndex(true).then((data) => {\n        this.documentService.documentsList = data;\n        this.documentService.setCurrentDoc(guid);\n      });\n    }\n    // their doc\n    else if (this.navParams.get(\"guid\") && !this.documentService.currentDoc && docData) {\n      let jsonDoc = atob(docData);\n      let doc = JSON.parse(jsonDoc);\n      let resp = await this.documentService.getDocumentsIndex(true);\n      this.documentService.documentsList = resp;\n      let guid = this.navParams.get(\"guid\");\n   \n      if (this.documentService.documentExists(guid)) {\n        this.documentService.setCurrentDoc(guid);\n      }\n      else {\n        //get the file buffer\n        let path = doc.pathAnnotatedDoc + this.navParams.get(\"guid\") + \".pdf\";\n        console.log(path);\n\n        let fileBuffer = await this.documentService.getDocumentByPath(path, doc.documentKey);\n\n\n        \n        let copied = await this.documentService.copyDocument(doc, guid, fileBuffer);\n        \n        this.blockPdf.ngOnInit();\n      }\n    }\n    else{\n      console.log('Error, must pass in guid')\n    }\n\n    console.log('ionViewDidLoad SignPage');\n    this.name = blockstack.loadUserData().profile.name;\n\n\n    // setTimeout( () =>{\n    //   this.documentService.mergeAnnotations(this.navParams.get(\"guid\") );\n    // }, 3000 )\n   \n   \n\n  }\n\n  next() {\n    this.navCtrl.push(\"ReviewPage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n  back() {\n    this.navCtrl.push(\"EmailPage\", {\n      guid: this.documentService.currentDoc.guid\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sign/sign.ts","import { Component, ViewChild } from '@angular/core';\nimport { Nav, Platform, Toast } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { HomePage } from '../pages/home/home';\nimport { AnnotatePage } from '../pages/annotate/annotate';\nimport { DocumentService } from '../services/document.service';\nimport { PopoverController, ToastController} from 'ionic-angular';\nimport { ViewController } from 'ionic-angular';\nimport { OptionsPopoverPage } from './options.popover.page';\nimport { MenuController } from 'ionic-angular';\nimport { BlockStackService } from './../services/blockstack.service';\nimport moment from 'moment-timezone';\nimport 'rxjs/add/operator/toPromise';\nimport { LoadingController } from 'ionic-angular';\nimport { prototype } from 'long';\ndeclare let blockstack: any;\ndeclare let document: any;\ndeclare var window: any;\nconst $ = document.querySelectorAll.bind(document);\nimport { AlertController } from 'ionic-angular';\ndeclare let jQuery: any;\n\n\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage: any = HomePage;\n\n  pages: Array<{ title: string, component: any }>;\n\n  name: string;\n  isLoggedIn = false;\n  loginState = \"Login\";\n  fileName = \"blockusign/pdf1.pdf\";\n  profile: any;\n  pdfBuffer: any;\n  avatar: string = \"http://www.gravatar.com/avatar/?d=identicon\";\n  documentsList: any;\n  email: string;\n\n  constructor(\n    public platform: Platform,\n    public statusBar: StatusBar,\n    public splashScreen: SplashScreen,\n    public loadingCtrl: LoadingController,\n    private alertCtrl: AlertController,\n    public documentService: DocumentService,\n    public popoverCtrl: PopoverController,\n    public menuCtrl: MenuController,\n    public blockStackService: BlockStackService,\n    public toastCntrl: ToastController\n  ) {\n\n    this.initializeApp();\n\n    // used for an example of ngFor and navigation\n    this.pages = [\n      { title: '1). Upload PDF', component: HomePage },\n      { title: '2). Annotate PDF', component: AnnotatePage }\n    ];\n\n    // global vars\n    if (window.location.host.includes(\"localhost\")) {\n      window.apiUrl = \"http://localhost:5000\";\n    }\n    else {\n      window.apiUrl = \"\";\n    }\n\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n\n\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n      this.showProfile();\n      this.setupDiscordMenu();\n\n\n    });\n  }\n\n  // openPage(page) {\n  //   // Reset the content nav to have just this page\n  //   // we wouldn't want the back button to show in this scenario\n  //   this.nav.setRoot(page.component);\n  // }\n\n  login() {\n    const origin = window.location.origin\n    blockstack.redirectToSignIn(origin, origin + '/manifest.json', ['store_write', 'publish_data', 'email'])\n  }\n\n  next() {\n\n\n    this.menuCtrl.close();\n\n    // if (this.nav.getActive().name == \"AnnotatePage\") {\n    //  this.nav.pop();\n    // }\n    // else{\n    //   jQuery('.block-pdf-page').empty();\n    // }\n\n    this.nav.setRoot(\"HomePage\");\n\n    let guid = this.documentService.currentDoc.guid;\n    this.nav.push(\"AnnotatePage\", {\n      guid: guid\n    });\n\n  }\n\n  home() {\n    this.menuCtrl.close();\n    this.nav.setRoot(\"HomePage\");\n    this.clearActive();\n  }\n\n  logout() {\n    blockstack.signUserOut(window.location.origin);\n  }\n\n  async showProfile() {\n\n    if (blockstack.isUserSignedIn()) {\n\n      let profile = blockstack.loadUserData();\n      this.name = profile.username;\n      this.isLoggedIn = true;\n      try {\n        this.avatar = profile.profile.image[0].contentUrl;\n      } catch (e) { console.log('no profile pic') }\n\n      this.loginState = \"[Logout]\";\n      this.documentService.getDocumentsIndex(true).then((data) => {\n        this.documentsList = data;\n      });\n\n      //if (!profile.username) {\n\n        let profileData = await this.blockStackService.getProfileData();\n\n        if (!profileData) {\n          this.profileModal(this.email);\n        }\n        else {\n          let myProfile = JSON.parse(profileData);\n          if (!myProfile.email){\n            this.profileModal(this.email);\n          }\n          else {\n            this.name = myProfile.email;\n          }\n        }\n\n      //}\n\n    } else if (blockstack.isSignInPending()) {\n      blockstack.handlePendingSignIn().then(function (userData) {\n        window.location = window.location.origin\n        this.documentsGetList();\n      });\n    }\n    else {\n      if (localStorage.getItem('signUp') !== 'true') {\n        window.location.href = \"signup.html\";\n      }\n      else {\n        localStorage.setItem('signUp', 'true');\n        this.login();\n      }\n\n    }\n  }\n\n  public setupDiscordMenu() {\n    $(\".focusable, .button\").forEach(el => {\n      // blur only on mouse click\n      // for accessibility, keep focus when keyboard focused\n      el.addEventListener(\"mousedown\", e => e.preventDefault());\n      el.setAttribute(\"tabindex\", \"0\");\n    });\n\n    $(\".server\").forEach(el => {\n      el.addEventListener(\"click\", () => {\n        const activeServer = $(\".server.active\")[0];\n        activeServer.classList.remove(\"active\");\n        activeServer.removeAttribute(\"aria-selected\");\n\n        el.classList.add(\"active\");\n        el.setAttribute(\"aria-selected\", true);\n      });\n    })\n\n    $(\".channel-text\").forEach(el => {\n      el.addEventListener(\"click\", () => {\n        $(\".channel-text.active\")[0].classList.remove(\"active\");\n        el.classList.add(\"active\");\n      });\n    })\n\n    // focus/blur on channel header click\n    $(\".channels-header\")[0].addEventListener(\"click\", e => {\n      e.preventDefault();\n\n      const focused = document.activeElement === e.target;\n      focused ? e.target.blur() : e.target.focus();\n    });\n  }\n\n  documentSelected(e, selectedDocument) {\n\n    this.documentService.currentDoc = selectedDocument;\n    this.next();\n  }\n\n\n\n\n  documentsGetList() {\n    this.documentService.getDocumentsIndex(true).then((data) => {\n      this.documentsList = data;\n    });\n  }\n\n\n  presentPopover(myEvent, item) {\n    let popover = this.popoverCtrl.create(OptionsPopoverPage, { selectedDoc: item });\n    popover.present({\n      ev: myEvent,\n\n    });\n  }\n\n  clearActive() {\n\n    $(\".channel-text\").forEach(el => {\n      try {\n        $(\".channel-text.active\")[0].classList.remove(\"active\");\n      }\n      catch (e) { }\n    });\n  }\n\n  profileModal(email) {\n\n    let alert = this.alertCtrl.create({\n      title: 'Please enter your email',\n      enableBackdropDismiss: false,\n      inputs: [\n        {\n          name: 'email',\n          placeholder: 'email',\n          value: email\n        }\n      ],\n      buttons: [\n        // {\n        //   text: 'Cancel',\n        //   role: 'cancel',\n        //   handler: data => {\n        //     console.log('Cancel clicked');\n        //   }\n        // },\n        {\n          text: 'Ok',\n          handler: data => {\n\n            // save here\n\n            this.blockStackService.setProfileData(data.email);\n\n            if (data.email.indexOf(\"@\") != -1) {\n              // logged in!\n            } else {\n              // invalid login\n              this.showErrorToast('Invalid Email');\n              return false;\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  showErrorToast(data: any) {\n    let toast = this.toastCntrl.create({\n      message: data,\n      duration: 3000,\n      position: 'top'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n\n    toast.present();\n  }\n\n\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Injectable } from '@angular/core';\nimport { Http, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\n\n@Injectable()\nexport class CoinService {\n    \n    baseUrl = \"https://min-api.cryptocompare.com/data/histohour?fsym=\";\n\n    coin = \"IOT\";\n\n    symbol = \"IOT\";\n\n    params = \"&tsym=USD&limit=60&aggregate=3&e=CCCAGG\";\n    \n    public url = \"\";\n\n    constructor(private http: Http) { \n\n    }\n\n   async getCoin(coin){\n\n        this.coin = coin;\n    \n        this.url = this.baseUrl + this.coin + this.params;\n        let response = await this.http.get(this.url).toPromise();\n\n        return response;\n    }\n\n    async getAllCoins(){\n        let resp = await this.http.get(\"https://min-api.cryptocompare.com/data/all/coinlist\").toPromise();\n        return resp;\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/coin.service.ts","import { Injectable } from '@angular/core';\nimport { Http, Response, Jsonp } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\ndeclare var $: any;\ndeclare var window: any;\n\n@Injectable()\nexport class CryptoCompareService {\n\n    baseUrl = \"https://www.cryptocompare.com/api/data\";\n\n    apiUrl = window.apiUrl ; //http://localhost:5000 http://popbot2.azurewebsites.net\n\n    url;\n\n    currency = \"BTC\";\n\n    aggregate = \"1\";\n\n    constructor(private http: Http, private jsonp: Jsonp) {\n\n    }\n\n    public async getTopCoins() {\n\n        let url = \"https://api.coinmarketcap.com/v1/ticker/?limit=377\";\n        let response = await this.http.get(url).toPromise();\n\n        let coinRefResponse = await this.http.get(\"https://min-api.cryptocompare.com/data/all/coinlist\").toPromise();\n        let coinsRef = coinRefResponse.json().Data;\n\n        let topCoins = {};\n        response.json().forEach(element => {\n            let coinData = coinsRef[element.symbol];\n            if (coinData) {\n                coinData.rank = element.rank;\n                topCoins[element.symbol] = coinData;\n            }\n            else {\n                console.error(\"Cannot find \" + element.symbol);\n            }\n        });\n\n\n\n        return topCoins;\n    }\n\n    public async getSocialStats(coinId, limit) {\n\n        if (!coinId)\n            coinId = 306304;\n\n        if (!limit)\n            limit = 337;\n\n        let api = \"/socialstatshistohour/?aggregate=1&id=\" + coinId + \"&limit=\" + limit;\n\n\n        this.url = this.baseUrl + api;\n        let response = await this.http.get(this.url).toPromise();\n\n        return response;\n    }\n\n\n    async getCoins(coinLimit, histPriceLimit, socialLimit, currency, aggregate ) {\n\n        this.currency = currency;\n        this.aggregate = aggregate;\n\n        if (!coinLimit) coinLimit = 10;\n\n        if (!histPriceLimit) histPriceLimit = 24;\n\n        if (!socialLimit) socialLimit = 24;\n\n\n        return await this.http.get(this.apiUrl + \"/api/coins?coinLimit=\" + coinLimit + \"&histPriceLimit=\"+ histPriceLimit + \"&socialLimit=\" + socialLimit + \"&currency=\" + this.currency + \"&aggregate=\" +  this.aggregate).toPromise();\n       \n    }\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/cryptocompare.service.ts","import { Injectable } from '@angular/core';\nimport { Http, Response, Jsonp, RequestOptions, RequestOptionsArgs, Headers } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\ndeclare var $: any;\ndeclare var window: any;\n\n@Injectable()\nexport class SlackService {\n\n    baseUrl = window.apiUrl + \"/api/slack\"; //\"https://hooks.slack.com/services/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\";\n\n\n    constructor(private http: Http, private jsonp: Jsonp) {\n\n    }\n\n\n    async sendAlert( msg ) {\n        return await this.http.get(this.baseUrl + \"/\" + msg).toPromise();\n    }\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/slack.service.ts"],"sourceRoot":""}