<ion-content style="user-select:text">

  <block-steps activeStep="6" #blockSteps class="no-print">
  </block-steps>
  <br /><br />


  <div class="centerMe" style="max-width: 760px">



    <span style="padding: 10px 10px 10px 10px" *ngIf="!isSaving">* Beta - Save your Digital Signature to the Blockchain forever!&nbsp;<a href="https://github.com/ntheile/blockusign/issues/58" target="_blank"><ion-icon name="information-circle"></ion-icon></a>
    </span>
    <br /><br />

    <div style="position: relative; height: 350px; max-width: 420px;">

      <div *ngIf="isSaving" class="nyancat" style="max-width:600px">
        <span class="head">
          <span class="eyes"></span>
        </span>
        <span class="body">
          <span class="poptart"></span>
          <span class="feet">
            <span class="foot one"></span>
            <span class="foot two"></span>
            <span class="foot three"></span>
            <span class="foot four"></span>
          </span>
        </span>
        <span class="tail"></span>



        <div class="rainbow">
          <div class="red">Saving Saving Saving Saving Saving Saving Saving Saving Saving</div>
          <div class="orange">to to to to to to to to to</div>
          <div class="yellow">the the the the the the the the the </div>
          <div class="green">block block block block block block block block block</div>
          <div class="blue">chain chain chain chain chain chain chain chain chain </div>
          <div class="purple">right meow right meow right meow right meow right</div>
        </div>
      </div>

      <block-pdf marginTop="10px" locked="true" style="zoom: .55; width: 100%; " class="shadow">
      </block-pdf>   
     
      <button *ngIf="isOnBlockchain" ion-button style="border-radius: 30px;  
      position: absolute; top: 36%; left:29%;
      z-index: 999999;background-color: green">Saved
        <br />On Chain
        <ion-icon name="md-checkmark-circle" style="margin-left: 20px; "></ion-icon>
      </button>

      <button *ngIf="!isSaving && !isOnBlockchain" ion-button style="border-radius: 30px; 
      position: absolute; top: 36%; left:29%;
      z-index: 999999;"
        (click)="postBlockchain()">Sign
        <ion-icon name="md-create" style="margin-left: 20px; "></ion-icon>
      </button>
      
      <div style="z-index: 999999; cursor: pointer; position: absolute; top: 6%; left: 42%; " class="btooltip">
        <a href="https://core.blockstack.org/v1/names/{{guid}}.blockusign1.id" target="_blank" style="opacity: .9 !important">
          <img class="avatar shadow" style="border-radius: 30px;" src="{{blockstack.loadUserData().profile.image[0].contentUrl}}" />
          <span class="btooltiptext">View Digital Signature</span>
        </a>

      </div>


      <div style="position: absolute; bottom: 10%; left: 42%; z-index: 999999;cursor: pointer; "
        class="btooltip">
        <div (click)="toggleSig()">
          <ion-icon name="ios-finger-print" class="shadow"
            style="font-size:50px;background-color: black; opacity: .75; 
            border-radius: 50%; padding: 4px 10px 4px 10px"></ion-icon><br />
          <!-- <a>
          <span *ngIf="!showSig">Show </span>
          <span *ngIf="showSig">Hide </span>
          Digital<br/>Signature Data</a> -->
          <span class="btooltiptext">
            <span *ngIf="!showSig">Show </span>
            <span *ngIf="showSig">Hide </span>
            Document Digital<br />Signature Data
          </span>
        </div>

      </div>
    </div>


    <p style=" user-select: text; margin: 10px 10px 10px 10px" *ngIf="showSig">
      <b>Hash</b> - <i>the pdf's unique signature</i><br />&nbsp;&nbsp;&nbsp;&nbsp; {{hash}} <br /><br />
      <b>Signature</b> - <i>your unique digital signature</i><br />&nbsp;&nbsp;&nbsp;&nbsp; {{signature}} <br /><br />
      <b>Address</b> - <i>your unique id for the Blockusign app that links to your name</i><br />&nbsp;&nbsp;&nbsp;&nbsp;
      {{address}} <br /><br />
    </p>


    <div style="clear:both"></div>

    <div style="margin: 10px 10px 10px 10px">
      <div style="display:flex; flex-direction: row; align-content: center; align-items: center; text-align: center; cursor:pointer"
        (click)="toggleAdvanced()">
        <h2>Status</h2>
        <ion-icon *ngIf="!showAdvancedInfo" name="ios-arrow-down" style="margin-left: 20px; "></ion-icon>
        <ion-icon *ngIf="showAdvancedInfo" name="ios-arrow-up" style=" margin-left: 20px; "></ion-icon>
      </div>

      <p>X of 4 steps complete</p>



      <div *ngIf="showAdvancedInfo">
        <h6>Step 1 - Complete (10ms)</h6>
        <p>Propegate to Subdomains Registrar</p>
        <p>{{subdomainsStatus | json}}</p>
        <a href="https://blockusign-subdomains.azurewebsites.net/status/{{guid}}" target="_blank">https://blockusign-subdomains.azurewebsites.net/status/{{guid}}</a>

        <h6>Step 2 - In progress (typically takes 12 hours, it will be 10 minutes when out of beta) </h6>
        <p>Propegate hash to the Blockchain</p>
        Sample - This is not the correct txid for your entry
        <a href="https://www.blockchain.com/btc/tx/b705474a72dbb874bb62ea1f9bf2fc6eea85ffdd1d6117cf05617e929e3befda"
          target="_blank">https://www.blockchain.com/btc/tx/b705474a72dbb874bb62ea1f9bf2fc6eea85ffdd1d6117cf05617e929e3befda</a>

        <h6>Step 3</h6>
        <p>Propegate zonefile hash to Blockstack Atlas P2P network</p>
        <a href="https://core.blockstack.org/v1/names/{{guid}}.blockusign1.id" target="_blank">https://core.blockstack.org/v1/names/{{guid}}.blockusign1.id</a>

        <h6>Step 4</h6>
        <p>Verify Signature with collaborator</p>

        <br /><br /><br />

        <p>How does this all work?</p>
        <a href="https://github.com/ntheile/blockusign/issues/58" target="_blank">https://github.com/ntheile/blockusign/issues/58</a>

      </div>



      <br /><br />

    </div>


  </div>

</ion-content>